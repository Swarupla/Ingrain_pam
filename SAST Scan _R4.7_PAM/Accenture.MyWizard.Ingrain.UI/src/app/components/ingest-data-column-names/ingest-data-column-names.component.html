<div class="modal-dialog modal-dialog-centered letsgetstarted-popup" role="document">
  <div class="modal-content">
    <div class="modal-header border-0">
      <h5 class="modal-title" id="ingrAI-enter-model-title">{{modelName}}</h5>
      <button type="button" class="close" aria-label="Close" (click)='onClose()'>
        <svg class="ingrAI-icon-svg ingrAI-icon-svg-md">
          <use xlink:href="#ingrAI-icon-close"></use>
        </svg>
      </button>
    </div>
    <div class="modal-body py-0">

      <div class="d-flex flex-column justify-content-center">
        <div class="frm-inner-content" *ngIf="filterAttrsOptionVisible == false && similaritythresholdVisible == false">
          <label *ngIf = "filterAttrsOptionVisible == false && filterAttributes !== undefined" class="form-lable" style="font-size: .875rem; font-weight: 500;">Please select Unique Identifier if you require Multiple or Bulk Prediction. Unique Identifier field should have 100% unique values</label>
          <label *ngIf = "filterAttrsOptionVisible == false && filterAttributes !== undefined" class="form-lable" style="font-size: .595rem; font-weight: 500;">Note: Columns containing text data will only be considered for Similarity Algorithm. Remaining columns will be used only for Display purpose. Please select accordingly</label>
          <table class="table table-striped table-hover table-vmiddle myw-table">
            <thead>
              <tr *ngIf = "filterAttrsOptionVisible == false && filterAttributes !== undefined">
                <th><span class="ingrAI-heading">Unique Identifier</span>&nbsp;
                  <app-info-tooltip class="ml-auto" [description]="'uniqueidinfo'" [className]="'uniqueidentifier'"></app-info-tooltip></th>
                <th>
                  <mat-form-field>
                    <mat-select [(ngModel)]="uniqueid" [disabled]="isidentifierdisable" (ngModelChange)="selectUniqueColumn(uniqueid)" placeholder="select"
                      single>
                      <!-- <mat-option [value]="None">None</mat-option> -->
                      <mat-option [value]="columns" *ngFor="let columns of uniquecolumnNames">
                        {{columns.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
              </th>
              </tr>
              <tr>
                <th><span class="ingrAI-heading"><input name="selectAllButton" type="checkbox" [(ngModel)]="selectedAll" [(value)]="selectedAll" (change)="selectAll();"/> Select</span></th>
                <th><span class="ingrAI-heading">Ingest Data Columns</span></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let column of displaycolumns; let i = index">
                <td>
                  <input type="checkbox" [(ngModel)]='column.checked' [disabled]="column.disable"
                    (change)="selectColumnNames(i)">
                </td>
                <td>{{column.name}}</td>
              </tr>
            
            </tbody>
          </table>
        </div>
        <div class="frm-inner-content" *ngIf="filterAttrsOptionVisible == true && similaritythresholdVisible == false">
          <table class="table table-striped table-hover table-vmiddle myw-table" *ngIf="!emptyFilters">
            <tbody>
              <tr *ngFor="let filterOption of filterSelectedOptions; let i = index">
                <td>{{filterOption.name}}</td>
                <td>
                  <app-multi-select-drop-down class="ingrAI-list-item"
                    [defaultValues]='filterOption.defaultFilterOptions'
                    (outputData)='setFilterAttributes($event, i)' 
                    (removeData) = "removeAttribute($event)" 
                    [columnData]='filterOption.columnDataFilterOptions'
                    [moduleName]="'DataTransformation'"
                    [parentName]="'filter'"
                    [disableDropdown]="readOnly">
                  </app-multi-select-drop-down>
                </td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="emptyFilters">There are no category values to filter. Click on Next to Proceed.</div>
          <div *ngIf="noFilterAttrsSelected">There are no category values selected to filter. Click on Next to Proceed.</div>
          <div *ngIf="isfilteravailable">Click on Select to Proceed.</div>
        </div>
        <div class="frm-inner-content" *ngIf="similaritythresholdVisible == true">
          <ng-container [ngTemplateOutlet]="similaritythresholdRowView"></ng-container>
        </div>
      </div>

    </div>
    <div class="modal-footer border-0" *ngIf="filterAttrsOptionVisible == false && similaritythresholdVisible == false && filterAttributes != undefined">
      <button type="button" class="btn btn-primary" (click)='onNext()'
        [disabled]='disableSubmitBtn'>Next</button>
    </div>
    <div class="modal-footer border-0" *ngIf="(filterAttrsOptionVisible == true && similaritythresholdVisible == false) || filterAttributes == undefined">
      <button type="button" class="btn btn-primary" (click)='onSelect()' *ngIf="!emptyFilters && !noFilterAttrsSelected"
        [disabled]='disableSubmitBtn'>Select</button>
      <button type="button" class="btn btn-primary" (click)='onSelect()' *ngIf="emptyFilters || noFilterAttrsSelected"
        [disabled]='disableSubmitBtn'>Next</button>
    </div>
    <div class="modal-footer border-0" *ngIf="similaritythresholdVisible == true">
      <button type="button" class="btn btn-primary" (click)='onSelectstopwords()'>Select</button>
    </div>

    <ng-template #similaritythresholdRowView>
      <br/><br/>
     <div><span class="ingrAI-heading">Select output representation</span></div>
     <br/>
     <label class="form-lable" style="font-size: .875rem; font-weight: 600;"><input type="radio" id="cds_radio1" name="modal-rd"
      (click)="showtoprecords()" checked>&nbsp;<span>Top n records</span></label>&nbsp;&nbsp;&nbsp;&nbsp;
     <label class="form-lable" style="font-size: .875rem; font-weight: 600;"><input type="radio" id="cds_radio2" name="modal-rd"
      (click)="showthreshold()">&nbsp;<span>Threshold</span></label>   

      <div *ngIf= "toprecordsvisible" style="padding-left: 12%;">
        <input type="number" min="1" max="100" [(ngModel)]="toprecords" style="width: 10%; margin-top: 3%;" />
        <label style="color: red;font-size:smaller">*</label>
      </div>

      
      <div *ngIf= "thresholdvisible" style="padding-left: 27%;padding-right: 30%;margin-top: 1rem;">
        <!-- <div class="d-flex align-items-center" style="width: 81%;margin-top: 7%;">
        <div class="ingrain-range-value">0</div>
        <div class="mx-3 ingrain-range w-100">
          <input type="range" #inputRange
            [(ngModel)]="rangebind" class="myw-range-slider"
            (change)="onInputChange(inputRange.value)"
            [value]="rangebind" step="1"
            min="0" max="100">
          <span
            class="myw-range-output">{{rangebind}}</span>
        </div>
        <div class="ingrain-range-value">100</div>
      </div> -->
      <div id="slider" class="flex-grow-1 ml-2 ac-range position-relative"
        style="top: -20px; font-size: 0.7rem;">
      <span class="myw-range-output ac-pro-value"
          [ngStyle]="getStyles(rangebind,1, 100)">{{rangebind}}</span>
      <input type="range" #inputRange [(ngModel)]="rangebind"
      (change)="onInputChange(inputRange.value)" min="1" max="100" step="1"
          class="slider" style="cursor: pointer;" />
      <div class="d-flex">
          <div title="1%" class="ingrAI-slider-label overflow-ellipsis">1%</div>
          <div title="100%" class="ml-auto ingrAI-slider-label overflow-ellipsis">100%
          </div>
      </div>
  </div>
    </div>

      <br/><br/>
      <div style="width: 100%;">
        <label class="form-lable" style="font-size: .875rem; font-weight: 600;padding-left: 1%;">Stop Words</label><br/>
          <div style="padding-left: 1%;">
            <span style="color: gray;"><i>Add the stop words to be removed before Training the model</i></span>
          </div><br/>
        <div class="d-inline-flex col-12" style="width: 84%;">
          <div class="col-9" style="padding-left: 0px;">
            <input #stopWords type="text" class="form-control col-12" maxlength="70" [(ngModel)]="stopWordscluster"
              placeholder="Type">
            <small class="form-text text-muted">You have {{70 - stopWordscluster?.length}} of 70 characters
              remaining.</small>
          </div>
          <input class="form-control col-1 btn btn-primary mx-2" title="Add" type="button"
            value="Add" (click)="addStopWords()">
        </div>
        <div class="ingrain-slider d-flex col-10 align-items-center m-3" style="margin: 1rem 0rem 1rem 0rem !important;width: 84%;">
          <div class="d-inline-flex" style="flex-wrap: wrap;">
           
             <div class="ingrAIn-feature-filter-item"
              *ngFor="let stopword of SimilaritySW, let i = index">
              <span>{{stopword}} </span>
              <span class="item-close" style="cursor: pointer;" (click)="removeclusterstopWords(i)">x</span>
            </div> 
          </div>
        </div>
      </div> 

    </ng-template>
    
    

    

  </div>
</div>
