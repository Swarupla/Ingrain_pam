<!-- navbar -->
<div class="myw-navbar" style="z-index: 800 !important; top: 0rem !important;"
  [ngClass]="isnavBarToggle == true ? 'collapsed': ''">
  <div class="myw-container d-flex flex-wrap">
    <div class="d-flex flex-nowrap align-items-center myw-navbar-wrap">
      <div class="myw-navbar-inner d-flex align-items-center">
        <a href="#" class="text-reset text-decoration-none mr-2" title="Back" aria-label="Back">
          <img src="assets/images/back.svg" alt="Back" class="myw-icon" (click)=previous()></a>
        <h6 class="m-0">Ready to Use AI Services: {{selectedServiceName}}</h6>
      </div>
    </div>
    <div class="d-flex flex-nowrap justify-content-end myw-navbar-actions"
      [ngClass]="isNavBarLabelsToggle == true ? 'myw-navbar-active': ''">

      <div class="myw-navbar-action myw-navbar-search" *ngIf="toggle" (click)="toggle = !toggle">
        <input #searchInput type="text" class="form-control form-control-sm" maxlength="70" (input)="searchModel($event.target.value)"
          placeholder="Search..." />
        <img src="assets/images/close.svg" alt="Close" (click)="toggle = !toggle; closeSearchBox()"
          style=" width: 0.8em;" />
      </div>
      <div *ngIf="!toggle" style="display:inline-flex; margin-right: 1em;">
        <input #searchInput type="text" class="form-control form-control-sm" (input)="searchModel($event.target.value)"
          placeholder="Search..." maxlength="70" style="width: 11.5rem;" />
        <img src="assets/images/close.svg" alt="Close" (click)="toggle = !toggle; closeSearchBox()"
          style=" width: 0.8em;" />
      </div>

      <div *ngIf="isShowInfoIcon" class="dropdown dropright dropflat d-flex ">
        <a class="myw-navbar-action" role="button" matTooltip="Info" data-toggle="dropdown" data-display="static"
          aria-haspopup="true" aria-expanded="false" id="infoPopup" data-toggle-tooltip="tooltip"
          data-placement="bottom" data-trigger="hover"><img src="assets/images/info.svg" alt="Info"/><span>Info</span></a>
        <div class="dropdown-menu dropdown-xl info-dropdown" aria-labelledby="infoPopup">
          <div class="d-flex align-items-center justify-content-between px-3 py-2">
            <h6 class="dropdown-title">Information</h6>
            <a style="cursor: pointer;" class="myw-dropdown-close" title="Close"><span
                class="sr-only">Close</span></a>
          </div>
          <div *ngIf="infoMessage" class="dropdown-body px-3 pb-3 myw-scrollbar"
            style="max-height: 6rem;font-size: 0.875em;" [innerHTML]="infoMessage">
            <!-- <p>{{infoMessage}}</p> -->
          </div>
        </div>
      </div>

      <ng-container *ngIf="isWordCloud == true">
        <a href="#" (click)="getCusteringModels()" class="myw-navbar-action" role="button" matTooltip="Refresh Model"
          data-toggle-tooltip="tooltip" data-placement="bottom" data-trigger="hover">
          <img src="assets/MonteCarlo/images/refresh.svg" alt="Refresh Model" /><span>Refresh Model</span>
        </a>
      </ng-container>
      <ng-container *ngIf="isWordCloud !== true">
        <a href="#" *ngIf="isClustering == false && similarityAnalysis== false" (click)="getAICoreModels()"
          class="myw-navbar-action" role="button" matTooltip="Refresh Model" data-toggle-tooltip="tooltip"
          data-placement="bottom" data-trigger="hover">
          <img src="assets/MonteCarlo/images/refresh.svg" alt="Refresh Model" /><span>Refresh Model</span>
        </a>
        <a href="#" *ngIf="isClustering == true" (click)="getCusteringModels()" class="myw-navbar-action" role="button"
          matTooltip="Refresh Model" data-toggle-tooltip="tooltip" data-placement="bottom" data-trigger="hover">
          <img src="assets/MonteCarlo/images/refresh.svg" alt="Refresh Model" /><span>Refresh Model</span>
        </a>
        <a href="#" *ngIf="similarityAnalysis == true" (click)="refreshSimilarityAnalyticsModels()"
          class="myw-navbar-action" role="button" matTooltip="Refresh Model" data-toggle-tooltip="tooltip"
          data-placement="bottom" data-trigger="hover">
          <img src="assets/MonteCarlo/images/refresh.svg" alt="Refresh Model" /><span>Refresh Model</span>
        </a>

      </ng-container>
      <a href="#" (click)="toggleNavBarLabels()" class="myw-navbar-toggle" matTooltip="Toggle Labels"
        data-toggle="tooltip" data-placement="left" data-trigger="hover"><img src="assets/images/caret.svg"
          alt="" /><span class="sr-only">Toggle Labels</span></a>
    </div>
  </div>
  <a href="#" (click)="toggleNavBar()" class="myw-navbar-pin" title="Toggle Navbar" data-toggle="tooltip"
    data-placement="left" data-trigger="hover"><img src="assets/images/pin.svg" alt="" /><span class="sr-only">Toggle
      Navbar</span></a>
</div>
<!-- /navbar -->
<div class="ingrAI-wrapper d-flex flex-column container-fluid pt-3">
  <div class="ingrAI-wrap d-flex flex-column flex-fill">
    <div id="main" class="ingrAI-content flex-fill d-flex flex-column mx-3">
      <div class=" row d-flex ingrAI-flow-control align-items-center ml-auto">
        <input class="btn btn-primary " *ngIf="isDeveloperPrediction == true" data-toggle="modal"
          title="Refresh Model List" type="button" value="Refresh Model List" (click)="refreshPredicationData()">
      </div>
      <div class="row flex-fill">

        <div style="width: 100%;">
          <h5 class="myw-600 mb-2">
            {{selectedServiceName}}
          </h5>
          <p style="margin-bottom: 1rem; font-size: 12px;text-align: justify;">
            {{selectedServicelongdescription}}
          </p>
          <!-- Download, Upload File, Train Model, Retrain Model-->
          <section class="myw-upload"
            *ngIf="templateFlag == '1' && isClustering!=true && similarityAnalysis!=true && isDeveloperPrediction!=true">


            <!-- Render the Upload template in this outlet -->
            <ng-container [ngTemplateOutlet]="uploadTemplateSection"></ng-container>
          </section>

          <!-- SimilarityAnalysis Section Starts -->
          <section class="myw-upload" *ngIf="similarityAnalysis == true && isWordCloud != true">
            <ng-container [ngTemplateOutlet]="FileEntityOptionToUpload"></ng-container>
            <div class="myw-file" *ngIf="fileView">
              <ng-container [ngTemplateOutlet]="uploadTemplateSection"></ng-container>
            </div>

            <div class="row myw-entity mt-2" *ngIf="entityView">
              <div class="table-responsive" *ngIf="entityLoader == true">
                <app-loader-display [className]='true'></app-loader-display>
                <div class="IngrAI-python-progress-dialogbox">
                  <p>Entity loading please wait...</p>
                </div>
              </div>
              <ng-container [ngTemplateOutlet]="entitySection" *ngIf="entityLoader == false"></ng-container>
            </div>

            <ng-container [ngTemplateOutlet]="datasetViewTemplate" *ngIf="datasetView == true"></ng-container>
          </section>
          <!-- SimilarityAnalysis Section Ends -->

          <!-- Word Cloud Starts -->
          <section class="myw-upload" *ngIf="isWordCloud == true">
            <ng-container [ngTemplateOutlet]="FileEntityOptionToUpload"></ng-container>
            <div class="myw-file" *ngIf="fileView">
              <ng-container [ngTemplateOutlet]="uploadTemplateSection"></ng-container>
            </div>

            <div class="row myw-entity mt-2" *ngIf="entityView">
              <div class="table-responsive" *ngIf="entityLoader == true">
                <app-loader-display [className]='true'></app-loader-display>
                <div class="IngrAI-python-progress-dialogbox">
                  <p>Entity loading please wait...</p>
                </div>
              </div>
              <ng-container [ngTemplateOutlet]="entitySection" *ngIf="entityLoader == false"></ng-container>
            </div>

            <ng-container [ngTemplateOutlet]="datasetViewTemplate" *ngIf="datasetView == true"></ng-container>

          </section>
          <!-- Word Cloud Ends -->

          <section class="myw-upload" *ngIf="templateFlag == '1' && isClustering==true">
            <ng-container [ngTemplateOutlet]="FileEntityOptionToUpload"></ng-container>
            <div class="myw-file" *ngIf="fileView">
              <ng-container [ngTemplateOutlet]="uploadTemplateSection"></ng-container>
            </div>

            <div class="row myw-entity mt-2" *ngIf="entityView">
              <div class="table-responsive" *ngIf="entityLoader == true">
                <app-loader-display [className]='true'></app-loader-display>
                <div class="IngrAI-python-progress-dialogbox">
                  <p>Entity loading please wait...</p>
                </div>
              </div>
              <ng-container [ngTemplateOutlet]="entitySection" *ngIf="entityLoader == false"></ng-container>
            </div>

            <ng-container [ngTemplateOutlet]="datasetViewTemplate" *ngIf="datasetView == true"></ng-container>

            <ng-container [ngTemplateOutlet]="ClusteringTextNotTextOptions"> </ng-container>
          </section>

          <div class="ingrAI-sub-nav" *ngIf="showNavigatonTabs == true" style="padding-top: 1rem;">

            <label class="myw-toggle-switch ingrain-switch myw-inline"
              *ngIf="showNavigatonTabs == true || isWordCloud == true">
              <input type="checkbox">
              <span class="label-first fs-12" [ngStyle]="checkColor()" (click)="loadModel()">Model</span>
              <span class="label-last fs-12" [ngStyle]="checkColorPublish()" (click)="loadUseCases()">Publish
                Usecase</span>
            </label>
          </div>

          <!-- navigationtab -->

          <!-- Filters -->
          <section class="d-flex mt-2"
            *ngIf="isClustering == true && trainedModels != undefined  && enableModelTab === true">
            <div style="line-height: 3;">Filters : &nbsp;</div>
            <select class="form-control col-2" #filterForModels (change)="applyFilters(filterForModels.value)">
              <option selected value="All">ALL</option>
              <option value="Text">Text</option>
              <option value="Non-Text">Non-text</option>
            </select>
          </section>
          <!-- Filters -->

          <!-- List of Models -->
          <section *ngIf="trainedModels !== undefined && templateFlag == '1' && enableModelTab === true"
            style="padding-top: 0.8rem; padding-bottom: 0.8rem;">
            <section *ngIf="trainedModels && trainedModels.length > 0" class="myw-section mt-4">
              <table class="table table-striped table-hover table-vmiddle myw-table"
                *ngIf="isClustering != true && isWordCloud != true">
                <thead>
                  <tr>
                    <th></th>
                    <th>Model Name</th>
                    <th style="width: 36em;">Service URL</th>
                    <th *ngIf="isDeveloperPrediction !=true && isClustering != true">DataSource</th>
                    <th>Last Trained Date</th>
                    <th *ngIf="isClustering == true">Model Type</th>
                    <th *ngIf="isClustering == true">Page Info</th>
                    <th *ngIf="isDeveloperPrediction==true">Last Trained By</th>
                    <th>Model Status</th>
                    <th>Action Items</th>
                    <th
                      *ngIf="selectedServiceId != '28179a56-38b2-4d69-927d-0a6ba75da377' && selectedServiceId != '50f2232a-0182-4cda-96fc-df8f3ccd216c' && isClustering != true">
                    </th>
                    <th></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container [ngTemplateOutlet]="tableRowView"></ng-container>
                </tbody>
              </table>

              <!-- Word Cloud Expand Table Starts -->
              <ng-container *ngIf="isWordCloud == true">
                <table mat-table [dataSource]="trainedModels" multiTemplateDataRows class="">
                  <ng-container matColumnDef="selection">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let model"><input type="radio" name="model_name"
                        value="{{model.CorrelationId}}" (change)="selectModel(model)">
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="Model Name">
                    <th mat-header-cell *matHeaderCellDef>Model Name</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model)">
                      {{model.ModelName}}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="Data Source">
                    <th mat-header-cell *matHeaderCellDef>Data Source</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model)">
                      {{model.DataSource}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Last Trained Date">
                    <th mat-header-cell *matHeaderCellDef>Last Trained Date</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model)">
                      {{model.ModifiedOn}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Page Info">
                    <th mat-header-cell *matHeaderCellDef>Page Info</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model)">
                      {{model.pageInfo}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Model Status">
                    <th mat-header-cell *matHeaderCellDef>Model Status</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model)" title="{{model.StatusMessage}}">
                      {{model.ModelStatus}} </td>
                  </ng-container>

                  <ng-container matColumnDef="function">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let model">
                      <a href="#" title="Publish UseCase" aria-label="Publish UseCase"
                        *ngIf="model.ModelStatus == 'Completed' && model.validcolumselect === true" class="ml-auto mr-3"
                        (click)="saveUsecase(model,1);">
                        <img src="assets/images/publish_usecase.svg" alt="Publish UseCase" />
                      </a>
                    </td>
                  </ng-container>


                  <ng-container matColumnDef="deleteselection">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let model"><a style="cursor: pointer;"
                        (click)="deletewordcloudmodel(model)">
                        <img style="height: 20px;" src="assets/images/delete.svg" />
                      </a>
                    </td>
                  </ng-container>

                  <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns  -->

                  <ng-container matColumnDef="expandedDetail" *ngIf="!isDelete">
                    <td mat-cell *matCellDef="let detail" colspan="6">
                      <div class="example-element-detail"
                        [@detailExpand]="detail == expandedElement ? 'expanded' : 'collapsed'">
                        <div *ngIf="detail.ModelStatus=='Completed'">

                          <!-- Ingested Column Names -->
                          <div class="my-2">
                            <span class="nlp-response-heading">Ingest Data Columns</span>
                          </div>

                          <div class="ingrain-sec-bdy">
                            <div class="d-flex flex-wrap myw-columns">

                              <label *ngIf="toggleSelect"><input type="checkbox" name="select-columns"
                                  (click)='selectAll()'><span>Select All</span></label>
                              <label *ngIf="!toggleSelect"><input type="checkbox" name="select-columns"
                                  (click)='deselectAll()'><span>Deselect All</span></label>

                              <label class="input-column"
                                *ngFor="let selectedcolumn of detail.ingestData.Columnsselectedbyuser"><input
                                  type="checkbox" name="select-columns input-column"
                                  (click)="selectColumnNames($event, detail, selectedcolumn)"
                                  checked><span>{{selectedcolumn}}</span></label>
                              <label class="column-data" *ngFor="let column of detail.unSelectedColumnNames">
                                <input type="radio" name="select-columns"
                                  (click)="selectColumnNames($event, detail, column)"><span>{{column}}</span></label>
                            </div>
                          </div>

                          <!-- Filter Add Words -->
                          <div class="form-group">
                            <label class="form-label nlp-response-heading d-block" style="margin-top: 0.5rem;">Filter
                              Word Cloud</label>
                            <div>
                              <span style="color: gray;"><i>Click on Generate after adding a stop word in the filter to
                                  update the word cloud</i></span>
                            </div>
                            <div class="d-inline-flex col-12">
                              <div class="row col-5">
                                <input #stopWords type="text" class="form-control col-12" [(ngModel)]="stopWordsWC"
                                  (ngModelChange)="enableDisable($event)" maxlength="70" placeholder="Type">
                                <label class="form-label">You have {{ 70 - stopWordsWC?.length}} of 70 characters remaining.</label>
                              </div>
                              <input class="form-control col-1 btn btn-primary mx-2" title="Add" type="button"
                                value="Add" (click)="addWords(detail)">
                            </div>
                            <div class="ingrain-slider d-flex col-10 align-items-center m-3"
                              style="margin: 1rem 0rem 1rem 0rem !important;">
                              <div class="d-inline-flex" style="flex-wrap: wrap;">
                                <div class="ingrAIn-feature-filter-item"
                                  *ngFor="let stopword of detail.ingestData.StopWords, let i = index">
                                  <span>{{stopword}} </span>
                                  <span class="item-close" (click)="removepopulatedWords(detail, i)">x</span>
                                </div>
                                <div class="ingrAIn-feature-filter-item"
                                  *ngFor="let stopword of detail.StopWords, let i = index">
                                  <span>{{stopword}} </span>
                                  <span class="item-close" (click)="removeWords(detail, i)">x</span>
                                </div>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                    </td>
                  </ng-container>


                  <tr mat-header-row *matHeaderRowDef="columnsToDisplayWC"></tr>
                  <tr mat-row *matRowDef="let row; columns: columnsToDisplayWC;" class="example-element-row"
                    [class.example-expanded-row]="expandedElement === row"
                    (click)="expandedElement = expandedElement === row ? null : row">
                  </tr>
                  <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" [hidden]="row.ModelStatus!='Completed'"
                    class="example-detail-row" [@detailExpand]="row == expandedElement ? 'expanded' : 'collapsed'"
                    style="overflow: hidden"></tr>
                </table>
              </ng-container>
              <!-- Word Cloud Expand Table Ends -->

              <ng-container *ngIf="isClustering == true && isWordCloud != true">
                <table mat-table [dataSource]="trainedModels" multiTemplateDataRows class="">
                  <ng-container matColumnDef="selection">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let model"><input type="radio" name="model_name"
                        value="{{model.CorrelationId}}" id="{{model.CorrelationId+model.ModelName}}"
                        (change)="selectModel(model,model.selectedModelType,$event)">
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="Model Name">
                    <th mat-header-cell *matHeaderCellDef>Model Name</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model,model.selectedModelType,$event)">
                      {{model.ModelName}} <span title='Show Data' class="ingrAI-download-view"
                        (click)="clusteringViewData(model.CorrelationId, model.selectedModelType, 'Popup')"><svg
                          class="ingrAI-icon-svg" style="width: 16px; height: 16px;">
                          <use xlink:href="#ingrAI-icon-show-data"></use>
                        </svg></span>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="Service URL">
                    <th style="width: 36em;" mat-header-cell *matHeaderCellDef>Service URL</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model,model.selectedModelType,$event)">
                      {{model.PredictionURL}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Data Source">
                    <th mat-header-cell *matHeaderCellDef>Data Source</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model,model.selectedModelType,$event)">
                      {{model.DataSource}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Last Trained Date">
                    <th mat-header-cell *matHeaderCellDef>Last Trained Date</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model,model.selectedModelType,$event)">
                      {{model.ModifiedOn}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Model Type">
                    <th mat-header-cell *matHeaderCellDef>Model Type</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model,model.selectedModelType,$event)">
                      <ng-container *ngIf="model.modelTypes.length > 1">
                        <select #modelTypeSelection class="form-control" style="border-radius: 5px;"
                          (change)="modelTypeChange(modelTypeSelection.value,model.CorrelationId)">
                          <option *ngFor="let option of model.modelTypes" value='{{option}}'>{{option}}</option>
                        </select>
                      </ng-container>
                      <ng-container *ngIf="model.modelTypes.length == 1 || model.modelTypes.length == 0"
                        style="padding-left: 0.575rem;">
                        <span style="margin-left: 10px;">{{model.modelTypes}}</span>
                      </ng-container>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="Page Info">
                    <th mat-header-cell *matHeaderCellDef>Page Info</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model,model.selectedModelType,$event)">
                      {{model.pageInfo}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Model Status">
                    <th mat-header-cell *matHeaderCellDef>Model Status</th>
                    <td mat-cell *matCellDef="let model" (click)="selectModel(model,model.selectedModelType,$event)"
                      title="{{model.StatusMessage}}"> {{model.ModelStatus}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Action Item">
                    <th mat-header-cell *matHeaderCellDef>Action Item</th>
                    <td mat-cell *matCellDef="let model" style="width: 90px">
                      <label style="color: #004dff;cursor: pointer;" class="text-decoration-none"
                        *ngIf="model.pageInfo == 'InvokeIngestData' && model.ModelStatus == 'Completed'"
                        (click)="trainSimModel(model.CorrelationId,model.Status)">Train Model</label>

                      <label style="color: #004dff;cursor: pointer;" class="text-decoration-none"
                        *ngIf="model.pageInfo != 'InvokeIngestData' && model.ModelStatus == 'Completed'"
                        (click)="trainRetrain(true, model.CorrelationId)">ReTrain Model</label>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="function">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let model">
                      <a href="#" title="Publish UseCase" aria-label="Publish UseCase"
                        *ngIf="model.pageInfo != 'InvokeIngestData' && model.ModelStatus == 'Completed'"
                        class="ml-auto mr-3" (click)="saveUsecase(model,1);">
                        <img src="assets/images/publish_usecase.svg" alt="Publish UseCase" />
                      </a>
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="deleteselection">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let model"><a style="cursor: pointer;" (click)="deleteModel(model)">
                        <img style="height: 20px;" src="assets/images/delete.svg" />
                      </a>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="recordsCount" *ngIf="isClustering == true">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let model">
                      <a *ngIf="model.ModelStatus == 'Completed'"
                        (click)="getRecordCount(model)" class="myw-navbar-action" role="button" matTooltip="View Record Count"
                        data-toggle="modal" data-target="#sampledataModal" data-toggle-tooltip="tooltip" data-placement="bottom"
                        data-trigger="hover"><img src="assets/images/summary.svg" alt="View Sample Data" /></a>
                    </td>
                  </ng-container>

                  <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns  -->
                  <ng-container matColumnDef="expandedDetail">
                    <td mat-cell *matCellDef="let detail" [attr.colspan]="columnsToDisplay.length">
                      <div class="example-element-detail"
                        [@detailExpand]="detail == expandedElement ? 'expanded' : 'collapsed'">
                        <div *ngIf="detail.ModelStatus=='Completed'">
                          <h6 class="fs-14 myw-500 mb-3">Model Metrics</h6>
                          <div class="myw-cluster-data d-flex">
                            <div class="mr-5">
                              <div class="myw-500 mb-2">
                                <div class="d-inline-flex mb-3">
                                  <app-info-tooltip [labelTitle]="'Silhouette Coefficient'"
                                    [description]="'silhouetteCoefficient'">
                                  </app-info-tooltip>
                                </div>
                              </div>
                              <div class="fs-12">{{detail.Silhouette_Coefficient}}</div>
                            </div>
                            <div class="mr-5">
                              <div class="myw-500 mb-4">Clusters</div>
                              <div class="fs-12">{{detail.Clusters}}</div>
                            </div>
                            <div class="mr-5">
                              <div class="myw-500 mb-4">Stop Words</div>
                              <ng-container *ngIf="detail.StopWords !== null">
                                <div class="fs-12">{{detail.StopWords}}</div>
                              </ng-container>
                              <ng-container *ngIf="detail.StopWords == null || detail.StopWords == ''">
                                <div class="fs-12">NA</div>
                              </ng-container>
                            </div>

                            <div class="mr-5">
                              <div class="myw-500 mb-4">Ngram</div>
                              <ng-container *ngIf="detail.Ngram !== null">
                                <div class="fs-12">{{detail.Ngram}}</div>
                              </ng-container>
                              <ng-container *ngIf="detail.Ngram == null || detail.Ngram == ''">
                                <div class="fs-12">NA</div>
                              </ng-container>
                            </div>
                          </div>
                          <div class="d-flex my-3 align-items-center" *ngIf="detail.Clustering_type === 'Text'">
                            <h6 class="fs-14 myw-500 mb-3"
                              *ngIf="detail.Clustering_type === 'Text' && detail.Clusters>0 && !clusterChartTextView">Cluster Mapping</h6>
                            <div class="ml-auto myw-actions">
                              <input type="button" class="btn btn-primary" value="Map Data"
                                (click)="mapClusterData(detail.CorrelationId, detail)"
                                *ngIf="detail.Clustering_type === 'Text'">

                              <input type="button" class="btn btn-secondary" [disabled]="disableDwnldMappedData"
                                value="Download Mapped Data" title="Export the password protected file, click on info icon to know the password hint" *ngIf="detail.Clustering_type === 'Text'"
                                (click)="clusteringDownloadMappedData(detail.CorrelationId,detail.selectedModelType,detail.UniId)">

                              <input type="button" class="btn btn-secondary ml-2"
                                [value]="(clusterChartTextView) ? 'View Cluster Data' : 'Generate Cluster View'"
                                *ngIf="detail.Clustering_type === 'Text'" (click)="showVisualizationText(detail)">

                            </div>
                          </div>
                          <div *ngIf="detail.Clustering_type === 'Text'" class="mt-3">
                            <!-- TreeMap Structure -->
                            <div class="row">
                              <div class="col-12" *ngIf="clusterChartTextView && treeMapData">
                                <app-d3-treemap [data]="treeMapData" [setOfWordCloud]='setOfWordCloud'></app-d3-treemap>
                              </div>
                            </div>
                            <div class="row" *ngIf="!clusterChartTextView">
                              <div class="col-12 col-lg-6"
                                *ngFor="let clusterInput of toArray(totalCluster);let j=index;">
                                <div class="form-group mb-2">
                                  <ng-container *ngIf="detail.selectedModelInList=='KMeans'">
                                    <label class="form-label" style="color: black;">Cluster {{j}}</label>
                                  </ng-container>
                                  <ng-container *ngIf="detail.selectedModelInList=='DBSCAN'">
                                    <ng-container
                                      *ngIf="clusterMapping.ClusterInputs.DBSCAN['Cluster '+j] == undefined">
                                      <label class="form-label" style="color: black;">Cluster -1</label>
                                    </ng-container>

                                    <ng-container *ngIf="clusterMapping.ClusterInputs.DBSCAN['Cluster '+j]">
                                      <label class="form-label" style="color: black;">Cluster {{j}}</label>
                                    </ng-container>
                                  </ng-container>
                                  <form>
                                    <div class="form-inline">
                                      <input type="text"
                                        class="form-control myw-clusteringfc mr-3 clusterMapping{{detail.CorrelationId}}"
                                        *ngIf="detail.selectedModelInList=='KMeans'" [attr.data-mappingColumn]="column"
                                        maxlength="70"
                                        [value]="clusterMapping.ClusterInputs.KMeans['Cluster '+j] == undefined? '':clusterMapping.ClusterInputs.KMeans['Cluster '+j]"
                                        (change)="suggestionInputChange($event,j, detail.selectedModelInList, detail)">
                                      <input type="text"
                                        class="form-control myw-clusteringfc mr-3 clusterMapping{{detail.CorrelationId}}"
                                        [attr.data-mappingColumn]="column" *ngIf="detail.selectedModelInList=='DBSCAN'"
                                        maxlength="70"
                                        [value]="clusterMapping.ClusterInputs.DBSCAN['Cluster '+j] == undefined? 'Noise Point':clusterMapping.ClusterInputs.DBSCAN['Cluster '+j]"
                                        (change)="suggestionInputChange($event,j, detail.selectedModelInList, detail)">
                                      <!-- Radio Button Option Suggestions-->
                                      <ng-container *ngFor="let suggestion of detail.Suggestion[j]">
                                        <label class="myw-checkbox mr-2" [title]="suggestion"
                                          style="width: 10em;align-items: unset;justify-content: unset;">
                                          <input type="radio" [name]="'radio-1'+j" [id]="'radio'+suggestion"
                                            [checked]=" ( clusterMapping.ClusterInputs.KMeans['Cluster '+j] == suggestion) || ( clusterMapping.ClusterInputs.DBSCAN['Cluster '+j] == suggestion) "
                                            (click)="onClickSuggestion(suggestion, j, detail.selectedModelInList, detail)">
                                          <span>{{suggestion.length > 12 ? suggestion.substring(0,12) + '...' : suggestion
                                            }}</span>
                                        </label>
                                      </ng-container>
                                    </div>
                                  </form>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- For Clustering Type Non-Text -->
                          <div style="margin-bottom: 20px;" *ngIf="detail.Clustering_type === 'Non-Text'">
                            <input type="button" class="btn btn-primary" value="Download Data" title="Export the password protected file, click on info icon to know the password hint"
                              (click)="clusteringViewData(detail.CorrelationId, detail.selectedModelType, 'Download')">

                            <input type="button" #nonTextValue class="btn btn-secondary ml-2"
                              [value]="(clusterChartNonTextView) ? 'Hide Cluster View' : 'Generate Cluster View'"
                              (click)="showVisualizationNonText()">
                          </div>
                          <div class="row" *ngIf="detail.Clustering_type === 'Non-Text'">
                            <div class="col-12" *ngIf="clusterChartNonTextView">
                              <div class="row mb-2">

                                <div class="col-4 col-lg-4" *ngIf="bubbleChartData">
                                  <span class="myw-500 fs-16">Cluster wise count</span>
                                  <app-bubble-chart [data]="bubbleChartData"></app-bubble-chart>
                                </div>

                                <div class="col-8 col-lg-8" *ngIf="barGroupData">
                                  <span class="myw-500 fs-16">Feature Importance by Cluster</span>
                                  <app-bar-group-chart [width]="500" [height]="500" [data]="barGroupData">
                                  </app-bar-group-chart>
                                </div>

                              </div>

                            </div>
                          </div>
                        </div>
                      </div>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                  <tr mat-row *matRowDef="let row; columns: columnsToDisplay;" class="example-element-row"
                    [class.example-expanded-row]="expandedElement === row"
                    (click)="expandedElement = expandedElement === row ? null : row">
                  </tr>
                  <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" [hidden]="row.ModelStatus!='Completed'"
                    class="example-detail-row" [@detailExpand]="row == expandedElement ? 'expanded' : 'collapsed'"
                    style="overflow: hidden"></tr>
                </table>
              </ng-container>
            </section>
          </section>
          <!-- List of Models -->

          <!-- Word Cloud Generation Starts -->
          <section *ngIf="trainedModels !== undefined &&  trainedModels.length > 0 && templateFlag == '1' && 
                      enableModelTab === true && isWordCloud == true"><br /><br />
            <div>
              <span class="nlp-response-heading">Generate Word Cloud</span>
              <input class="btn btn-primary mx-2" [disabled]="disabledGenerateWC" title="Generate" type="button"
                value="Generate" (click)="generateWC()">
            </div> <br /><br />
            <ng-container *ngIf="selectedWCImage != ''">
              <app-word-cloud-image class="word-cloud-image" [wordCloudImage]="selectedWCImage"></app-word-cloud-image>
            </ng-container>
          </section>
          <!-- Word Cloud Generation Ends -->

          <!-- Evaluate Model - Template 1 -->
          <section *ngIf="trainedModels !== undefined && trainedModels.length > 0 && templateFlag == '1' && 
            enableModelTab === true && isDeveloperPrediction!=true && isWordCloud != true">
            <ng-container
              *ngIf="selectedServiceId === '93df37dc-cc72-4105-9ad2-fd08509bc823' && disabledEvaluate == false">

              <label class="form-lable" style="font-size: .875rem; font-weight: 600;"><input type="radio"
                  id="cds_radio1" name="modal-rd" (click)="singleEval()" checked><span>Single</span></label>&nbsp;&nbsp;
              <ng-container
                *ngIf="this.uniqueScore !== null && this.uniqueScore !== undefined && this.uniqueScore !== ''">
                <label class="form-lable" style="font-size: .875rem; font-weight: 600;"><input type="radio"
                    id="cds_radio2" name="modal-rd" (click)="bulkEval()"
                    [disabled]="selectedbulk_multiple"><span>Bulk</span></label>
              </ng-container>
            </ng-container><br /><br />
            <div class="fs-14 myw-500">Evaluate Model</div>
            <ng-container *ngIf="this.Bulkmultiple === 'Single'">
              <div class="row align-items-center mb-3"
                *ngIf="selectedServiceId != '50f2232a-0182-4cda-96fc-df8f3ccd216c' && selectedServiceId != 'e6f8243b-e00f-4d05-b16c-8c6a449b5a4c'  && isClustering!=true && disabledEvaluate == false">
                <div class="col col-lg-6" *ngFor="let column of selectedIngestedColumnNames">
                  <div class="form-group mb-0">
                    <label class="form-label" style="word-break: break-word;">{{column}}</label>
                    <input type="text" #textValue [attr.data-columnVal]="column" type="text"
                      class="form-control service-columns" maxlength="70" placeholder="Enter text">
                      <label class="form-label">You have {{ 70 - textValue.value?.length}} of 70 characters remaining.</label>
                  </div>
                </div>
              </div>
            </ng-container>

            <div class="px-3 pt-3"
              *ngIf="selectedServiceId == 'e6f8243b-e00f-4d05-b16c-8c6a449b5a4c' && isClustering!=true && disabledEvaluate == false">
              <div class="row align-items-center mb-3">
                <div class="col-6 col-lg-3">
                  <div class="form-group">
                    <label class="form-label">Type</label>
                    <select #select class="form-control" [(ngModel)]="columnSelectValForEvaluate"
                      (change)='onEvaluationColSelected(select.value)'>
                      <option [ngValue]="undefined" disabled selected>Type</option>
                      <option *ngFor='let column of selectedIngestedColumnNames; let i=index'>
                        {{column}}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="col-6 col-lg-9">
                  <div class="form-group">
                    <label class="form-label">Input Sentence</label>
                    <input #inputSentence type="text" maxlength="70" [attr.data-columnVal]="column" class="form-control service-columns">
                    <label class="form-label">You have {{ 70 - inputSentence.value?.length}} of 70 characters remaining.</label>
                  </div>
                </div>
                <div class="col-6 col-lg-3">
                  <div class="form-group">
                    <label class="form-label">Number of words for Prediction</label>
                    <input type="number" [(ngModel)]="rangeValue" min="0" max="200" class="form-control"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57">
                  </div>
                </div>
              </div>
            </div>

            <div class="d-flex" *ngIf="isClustering!=true" style="justify-content: space-between;">
              <div class="form-group mb-1 col-10" *ngIf="similarityAnalysis!=true && isDeveloperPrediction!=true">
                <input type="text" maxlength="500" class="form-control" #evaluate [(ngModel)]="textForEvaluation">
                <small class="form-text text-muted">You have {{ 500 - textForEvaluation?.length}} of 500 characters
                  remaining.</small>
              </div>
              <div>
                <input class="col-2 btn btn-primary " type="button" value="Evaluate" (click)="evaluate()"
                  [disabled]="disabledEvaluate">

                <ng-container *ngIf="this.Bulkmultiple === 'Bulk'">
                  <input class="col-2 btn btn-primary " type="button" value="Download" title="Export the password protected file, click on info icon to know the password hint" (click)="downloadPrediction()"
                    [disabled]="disableDownload">
                </ng-container>

              </div>
            </div>
            <div *ngIf="isClustering==true" style="padding-left: 0;" class="row align-items-center">
              <div class="col" *ngIf="clusteringType == 'Text'">
                <div class="row align-items-center mb-3">
                  <div class="col col-lg-6" *ngFor="let text of textColumns">
                    <div class="form-group mb-0">
                      <label class="form-label" style="word-break: break-word;">{{text}}</label>
                      <input type="text" class="form-control text-columns" maxlength="70" [attr.data-textVal]="text">
                    </div>
                  </div>
                </div>
              </div>
              <div class="col" *ngIf="clusteringType == 'Non-Text'">
                <div class="row align-items-center mb-3">
                  <div class="col col-lg-6" *ngFor="let nonText of nonTextColumns">
                    <div class="form-group mb-0">
                      <label class="form-label" style="word-break: break-word;">{{nonText}}</label>
                      <input type="number" [attr.data-nonTextVal]="nonText" class="form-control non-text-columns">
                      <span style="line-height: 3;padding-left: 10px;font-size: 12px;">Only integer values are
                        allowed.</span>
                    </div>
                  </div>
                  <div class="col col-lg-6" *ngFor="let category of categoryColumns">
                    <div class="form-group mb-0">
                      <label class="form-label" style="word-break: break-word;">{{category}}</label>
                      <input type="text" [attr.data-categoryVal]="category" maxlength="70" class="form-control category-columns">
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-auto">
                <button class="btn btn-primary" (click)="evaluate()" [disabled]="disabledEvaluate">Evaluate</button>
              </div>
            </div>
          </section>
          <!-- Evaluate Model -->

          <!-- Evaluate Model - Template 2 -->
          <section class="mt-3" *ngIf="templateFlag == '2' && isDeveloperPrediction!=true">
            <div class="nlp-response-heading">Evaluate Model</div>
            <div class="pb-2" *ngIf="selectedServiceId == '6356c856-0125-4409-b147-5fc4d48547ae'">
              <mat-form-field>
                <mat-label>Select Language</mat-label>
                <mat-select #languageTranslation (ngModelChange)="languageTranslationChange(languageTranslation.value)"
                  [(ngModel)]="selectedLangTranslation" required>
                  <mat-option *ngFor="let langOption of langTranslationOptions" [value]='langOption.value'>
                    {{langOption.name}}</mat-option>
                </mat-select>
                <mat-error class="pb-2" *ngIf="selectedLangTranslation === ''">
                  Please Select Language
                </mat-error>
              </mat-form-field>
            </div>
            <div class="d-flex" style="justify-content: space-between;">
              <div class="form-group mb-1 col-10">
                <input type="text" maxlength="2000" class="form-control" #evaluate2 [(ngModel)]="textForEvaluation"
                  (change)="inputChange()">
                <small class="form-text text-muted">You have {{ 2000 - textForEvaluation.length}} of 2000 characters
                  remaining.</small>

              </div>
              <div>
                <input class="col-2 btn btn-primary " type="button" value="Evaluate" (click)="evaluate()">
              </div>
            </div>
          </section>
          <!-- Evaluate Model -->

          <!-- Evaluate Model - Template 3 -->
          <section class="mt-3" *ngIf="templateFlag == '3' && isDeveloperPrediction!=true">
            <div class="form-group mb-2">
              <label class="form-label">Evaluate Model</label>
              <textarea class="form-control" [(ngModel)]="textForEvaluation" rows="3" cols="50" (change)="inputChange()"
                maxlength="2000"></textarea>
              <small class="form-text text-muted">You have {{ 2000 - textForEvaluation.length }} of 2000 characters
                remaining.</small>
            </div>
            <div class="d-flex">
              <div class="form-group">
                <div>
                  <label class="form-label">Minimum number of words in the summary</label>
                  <input type="number" class="form-control" [(ngModel)]="rangeValue" min="0" max="499"
                    class="form-control" onkeypress="return event.charCode >= 48 && event.charCode <= 57" />
                </div>
                <div>
                  <label class="form-label">Maximum number of words in the summary
                    <app-info-tooltip class="ml-auto" [description]="'maximumworddescription'"></app-info-tooltip>
                  </label>
                  <input type="number" class="form-control" [(ngModel)]="rangeValuemax" min="2" max="500"
                    class="form-control" onkeypress="return event.charCode >= 48 && event.charCode <= 57" />
                </div>
              </div>
              <div class="d-flex ml-auto align-self-center">
                <button class="btn btn-primary" (click)="evaluate()">Evaluate</button>
              </div>
            </div>
          </section>
          <!-- Evaluate Model -->

          <!-- Evaluated Model Result-->
          <!-- Template 1-->
          <section style="margin-top:20px;"
            *ngIf="modelSelectedForEvaluate && evaluatedResponse !== undefined && templateFlag == '1' && enableModelTab === true && isDeveloperPrediction!=true">
            <ng-container *ngIf="Bulkmultiple === 'Single'">
              <div class="w3-bar">
                <ng-container [ngTemplateOutlet]="evaluateModelButtonTemplate"></ng-container>
              </div>
            </ng-container>
            <div id="formattedResponse" class="w3-container myw-ai-bg"
              [ngClass]="{'show': responseType === 'formatted', 'hide' : responseType === 'raw'}">
              <ng-container
                *ngIf="selectedServiceId == '93df37dc-cc72-4105-9ad2-fd08509bc823' && Bulkmultiple === 'Single'">
                <div style="margin-top: 10px;"><label class="nlp-response-heading">Model Name : &nbsp;</label><span
                    style="font-size: 12px;">{{enteredModelName}}</span></div>
              </ng-container>
              <ng-container *ngIf="selectedServiceId != '93df37dc-cc72-4105-9ad2-fd08509bc823'">
                <div style="margin-top: 10px;"><label class="nlp-response-heading">Model Name : &nbsp;</label><span
                    style="font-size: 12px;">{{enteredModelName}}</span></div>
              </ng-container>
              <div *ngIf="evaluatedResponse.hasOwnProperty('intent')" style="margin-bottom: 18px;">
                <div class="nlp-response-heading">Intent</div>
                <div class="myw-600 mb-0" style="width:600px;">
                  <div><label class="h">Intent: &nbsp; </label><span class="p">{{evaluatedResponse.intent.name}}</span>
                  </div>
                  <div><label class="h">Confidence: &nbsp; </label><span
                      class="p">{{evaluatedResponse.intent.confidence}}%</span></div>
                </div>
              </div>
              <div *ngIf="evaluatedResponse.hasOwnProperty('entities') && evaluatedResponse.entities.length > 0">
                <div class="nlp-response-heading">Entities</div>
                <div *ngFor="let entity of evaluatedResponse.entities" class="myw-600 mb-0"
                  style="width:600px;margin-bottom:10px;">
                  <div><label class="h">Entity: &nbsp; </label><span class="p">{{entity.value}}</span></div>
                  <div><label class="h">Entity Type: &nbsp; </label><span class="p">{{entity.entity}}</span></div>
                  <div *ngIf="entity.hasOwnProperty('confidence')"><label class="h">Confidence: &nbsp; </label><span
                      class="p">{{entity.confidence}}%</span></div>
                </div>
              </div>
              <div
                *ngIf="evaluatedResponse.hasOwnProperty('response') && selectedServiceId != '93df37dc-cc72-4105-9ad2-fd08509bc823'">
                <!--Text Similarity Service-->
                <div class="myw-600">As per my analysis, I could find the following similar sentences:</div>
                <div class="  mt-2" style="width:600px;" *ngFor="let response of evaluatedResponse.response">
                  <div>
                    <label class="h mb-0">Sentence: &nbsp; </label><span class="p">{{response.sentence}}</span>
                  </div>
                  <div>
                    <label class="h mb-0">Score: &nbsp; </label><span class="p">{{response.score}}</span>
                  </div>
                </div>
              </div>
              <div *ngIf="evaluatedResponse.hasOwnProperty('response') && selectedServiceId == '93df37dc-cc72-4105-9ad2-fd08509bc823' 
                && Bulkmultiple === 'Single'">
                <!-- Similarity Analytics Service-->
                <div class="myw-600">As per my analysis, I could find the following result:</div>
                <div class="  mt-2" style="width:600px;" *ngFor="let response of evaluatedResponse.response">
                  <div>
                    <label class="h mb-0">Sentence: &nbsp; </label><span class="p">{{response.Description}}</span>
                  </div>
                  <div>
                    <label class="h mb-0">IssueId: &nbsp; </label><span class="p">{{response.IssueId}}</span>
                  </div>
                  <div>
                    <label class="h mb-0">Score: &nbsp; </label><span class="p">{{response.score}}</span>
                  </div>
                </div>
              </div>
              <div *ngIf="evaluatedResponse.hasOwnProperty('prediction_list')">
                <div class="" style="width:600px;">
                  <div class="myw-600">As per my analysis, the next words are</div>
                  <div class="mb-0" *ngFor="let predictions of evaluatedResponse.prediction_list">
                    <div *ngFor="let response of predictions | keyvalue">
                      <span class="p">{{response.value}}</span>
                    </div>
                  </div>
                </div>
              </div>
              <ng-container
                *ngIf="selectedServiceId == '93df37dc-cc72-4105-9ad2-fd08509bc823' && Bulkmultiple === 'Single'">
                <div *ngIf="evaluatedResponse.hasOwnProperty('Predictions')">
                  <div class="" style="overflow-y: hidden; overflow-x: auto;">
                    <div class="myw-600">As per my analysis,</div>
                    <table class="ingrAI-table break-ingrAI-table">
                      <thead>
                        <tr>
                          <th *ngFor="let header of evalPredictionHeaders" scope="col" style="width: 14em;">{{header}}
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let predictions of evaluatedResponse.Predictions">
                          <td *ngFor="let response of predictions | keyvalue">
                            {{response.value}}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </ng-container>
              <ng-container *ngIf="selectedServiceId != '93df37dc-cc72-4105-9ad2-fd08509bc823'">
                <div *ngIf="evaluatedResponse.hasOwnProperty('Predictions')">
                  <div class="" style="overflow-y: hidden; overflow-x: auto;">
                    <div class="myw-600">As per my analysis,</div>
                    <table class="ingrAI-table break-ingrAI-table">
                      <thead>
                        <tr>
                          <th *ngFor="let header of evalPredictionHeaders" scope="col" style="width: 14em;">{{header}}
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let predictions of evaluatedResponse.Predictions">
                          <td *ngFor="let response of predictions | keyvalue">
                            {{response.value}}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </ng-container>
              <div class="d-flex mt-2" *ngIf="selectedServiceId === '72c38b39-c9fe-4fa6-97f5-6c3adc6ba355'">
                <!--For Clustering-->
                <div class="card-shadow d-flex wiz-card-two" style="width:600px;">
                  <div class="col-3">Assigned Cluster : </div> &nbsp;
                  <div>{{evaluatedResponse}}</div>
                </div>
              </div>
            </div>
            <!-- Evaluate Model Result-->
            <!-- Raw Data-->
            <div id="rawEvaluatedData" class="w3-container myw-ai-bg"
              [ngClass]="{'show': responseType === 'raw', 'hide' : responseType === 'formatted'}">
              <div style="margin-top: 10px;"><label class="nlp-response-heading">Model Name : &nbsp;</label><span
                  style="font-size: 12px;">{{enteredModelName}}</span></div>
              <section *ngIf="modelSelectedForEvaluate && rawEvaluatedData !== undefined">
                <!-- <pre>{{rawEvaluatedData}}</pre> -->
                <ngx-json-viewer [json]="rawEvaluatedData"></ngx-json-viewer>
              </section>
            </div>
            <!-- Raw Data-->
          </section>

          <!-- Template 2-->
          <section style="margin-top:20px;"
            *ngIf="evaluatedResponse !== undefined && templateFlag == '2' && isDeveloperPrediction!=true">
            <div class="w3-bar">
              <ng-container [ngTemplateOutlet]="evaluateModelButtonTemplate"></ng-container>
            </div>
            <div id="formattedResponse" class="w3-container myw-ai-bg"
              [ngClass]="{'show': responseType === 'formatted', 'hide' : responseType === 'raw'}">
              <div class="mt-3" style="margin-bottom: 18px;">
                <div class="" style="width:600px;">
                  <div *ngIf="selectedServiceId=='b1ec9f0d-07e0-46c5-bf59-e38e2444223d'">
                    <!--Detect Sentiment Service-->
                    <div class="myw-600">As per my analysis, the provided text is</div>
                    <label class="h mb-0">Primary Sentiment: &nbsp; </label><span
                      class="p mb-0">{{evaluatedResponse.response}}</span>
                  </div>
                  <div *ngIf="selectedServiceId=='ff685323-e0bb-4543-b9eb-0605032f4f90'">
                    <!--Co Reference Service-->
                    <div class="myw-600">As per my analysis,</div>
                    <span class="p mb-0">{{evaluatedResponse.response}}</span>
                  </div>
                  <div *ngIf="selectedServiceId=='6356c856-0125-4409-b147-5fc4d48547ae'">
                    <!--Language Translate-->
                    <div class="myw-600">As per my analysis,</div>
                    <span class="p mb-0">{{evaluatedResponse}}</span>
                  </div>
                </div>
              </div>
            </div>
            <!-- Evaluate Model Result-->
            <!-- Raw Data-->
            <div id="rawEvaluatedData" class="w3-container myw-ai-bg"
              [ngClass]="{'show': responseType === 'raw', 'hide' : responseType === 'formatted'}">
              <section *ngIf="rawEvaluatedData !== undefined">
                <ngx-json-viewer [json]="rawEvaluatedData"></ngx-json-viewer>
              </section>
            </div>
            <!-- Raw Data-->
          </section>

          <!-- Template 3-->
          <section style="margin-top:20px;" *ngIf="evaluatedResponse !== undefined && templateFlag == '3'">
            <div class="w3-bar">
              <ng-container [ngTemplateOutlet]="evaluateModelButtonTemplate"></ng-container>
            </div>
            <div id="formattedResponse" class="w3-container myw-ai-bg"
              [ngClass]="{'show': responseType === 'formatted', 'hide' : responseType === 'raw'}">
              <div class="mt-3" style="margin-bottom: 18px;">
                <div class="">
                  <div class="myw-600">I could summarize the given contents as follows:</div>
                  <span class="p mb-0">{{evaluatedResponse}}</span>
                </div>
              </div>
            </div>
            <!-- Evaluate Model Result-->
            <!-- Raw Data-->
            <div id="rawEvaluatedData" class="w3-container myw-ai-bg"
              [ngClass]="{'show': responseType === 'raw', 'hide' : responseType === 'formatted'}">
              <section *ngIf="rawEvaluatedData !== undefined">
                <ngx-json-viewer [json]="rawEvaluatedData"></ngx-json-viewer>
              </section>
            </div>
            <!-- Raw Data-->
          </section>

          <!-- list of PublishUsecase -->
          <ng-container *ngIf="!isWordCloud">
            <section *ngIf="enablePublishUseCaseTab === true && publishUseCases !== undefined  && templateFlag == '1'"
              style="padding-top: 0.8rem; padding-bottom: 0.8rem;">
              <section *ngIf="publishUseCases && publishUseCases.length > 0" class="myw-section mt-4">
                <table class="table table-striped table-hover table-vmiddle myw-table">
                  <thead>
                    <tr>
                      <th></th>
                      <th>Use Case Name</th>
                      <th>Use case Description</th>
                      <th>Application Name</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let usecases of publishUseCases; let i = index">
                      <td>
                        <input *ngIf="isDeveloperPrediction==true" type="radio" name="usecase_name"
                          value="{{usecases.CorrelationId}}" (change)="selectUseCase(usecases,i,isDeveloperPrediction)">

                        <input *ngIf="isDeveloperPrediction!=true" type="radio" name="usecase_name"
                          value="{{usecases.CorrelationId}}" (change)="selectUseCase(usecases,i,isDeveloperPrediction)">

                      </td>
                      <td>{{usecases.UsecaseName}}
                        <span [id]="'dvWebLink' +i " class="dropdown ingrAI-link-apps">
                          <a href="#" (click)="openUsecaseSampleInputWindow(i,usecases)" class="data-source"
                            data-toggle="dropdown" data-target="#applink" aria-haspopup="true" aria-expanded="false">
                            <span class="ingrAI-open-help tooltip-x">
                              <svg class="ingrAI-icon-svg ingrAI-icon-svg-md" style="width: 1em;height: 1em;">
                                <use xlink:href="#ingrAI-icon-info"></use>
                              </svg>
                            </span>
                          </a>

                          <div #applink class="dropdown-menu" style="min-width: 290px;" [id]="'dvShowWebLink'+i"
                            *ngIf="usecaseSampleInputshow? 'show': ''"
                            [ngClass]="{'show': selectedusecaseSampleInputIndex==i}">
                            <div class="ingrAI-drop-close" (click)="closeUsecaseSampleInputWindow(index)">
                              <a href="#"><svg class="ingrAI-icon-svg" style="height: 16px; width: 16px;">
                                  <use xlink:href="#ingrAI-icon-close"></use>
                                </svg></a>
                            </div>
                            <div class="dropdown-item inputSampleList myw-scrollbar" style="max-height: 156px;">
                              <label style="font-weight: bold;"> Attributes :-</label>
                              <table>
                                <tr *ngFor="let attribute of useCaseAttributes">
                                  <td>
                                    {{attribute}}
                                  </td>
                                </tr>
                              </table>
                            </div>
                          </div>
                        </span>
                      </td>
                      <td><span class="inputSampleList">{{usecases.Description}} </span> </td>
                      <td>{{usecases.ApplicationName}}</td>
                      <td>

                        <input *ngIf="isDeveloperPrediction==true" class="btn btn-primary " title="Train UseCase"
                          type="button"
                          [disabled]="selectedusecaseSampleInputBtnIndex !== i || disableUseCaseTrain === true"
                          value="Train UseCase" (click)="trainSelectedUseCase(usecases,isDeveloperPrediction)">

                        <input *ngIf="isDeveloperPrediction!=true" class="btn btn-primary " title="Train UseCase"
                          type="button"
                          [disabled]="selectedusecaseSampleInputBtnIndex !== i || disableUseCaseTrain === true"
                          value="Train UseCase" (click)="trainSelectedUseCase(usecases,isDeveloperPrediction)">

                      </td>
                      <td style="text-align: center;">
                        <ng-container *ngIf="usecases.CreatedBy == userId">
                          <a style="cursor: pointer;" (click)="deleteUseCaseModel(usecases)">
                            <img style="height: 20px;" src="assets/images/delete.svg" />
                          </a>
                        </ng-container>

                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
            </section>
          </ng-container>

          <ng-container *ngIf="isWordCloud">
            <section *ngIf="enablePublishUseCaseTab === true && publishUseCases !== undefined  && templateFlag == '1'"
              style="padding-top: 0.8rem; ">
              <section>
                <table class="table ingrAI-table">
                  <thead>
                    <tr>
                      <th></th>
                      <th>Use Case Name</th>
                      <th>Use case Description</th>
                      <th>Application Name</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                    <tr *ngFor="let usecases of publishUseCases; let i = index">
                      <td>
                        <input type="radio" name="usecase_name" value="{{usecases.CorrelationId}}"
                          (change)="selectUseCase(usecases,i,isDeveloperPrediction)">
                      </td>
                      <td>{{usecases.UsecaseName}}
                        <span [id]="'dvWebLink' +i " class="dropdown ingrAI-link-apps">
                          <a href="#" (click)="openUsecaseSampleInputWindow(i,usecases)" class="data-source"
                            data-toggle="dropdown" data-target="#applink" aria-haspopup="true" aria-expanded="false">
                            <span class="ingrAI-open-help tooltip-x">
                              <svg class="ingrAI-icon-svg ingrAI-icon-svg-md" style="width: 1em;height: 1em;">
                                <use xlink:href="#ingrAI-icon-info"></use>
                              </svg>
                            </span>
                          </a>

                          <div #applink class="dropdown-menu" style="min-width: 290px;" [id]="'dvShowWebLink'+i"
                            *ngIf="usecaseSampleInputshow? 'show': ''"
                            [ngClass]="{'show': selectedusecaseSampleInputIndex==i}">
                            <div class="ingrAI-drop-close" (click)="closeUsecaseSampleInputWindow(index)">
                              <a href="#"><svg class="ingrAI-icon-svg" style="height: 16px; width: 16px;">
                                  <use xlink:href="#ingrAI-icon-close"></use>
                                </svg></a>
                            </div>

                            <div style="max-height: 103px; overflow: auto;">
                              <div class="dropdown-item inputSampleList myw-scrollbar">
                                <label style="font-weight: bold;"> Attributes :-</label>
                                <table>
                                  <tr *ngFor="let attribute of useCaseAttributes">
                                    <td>
                                      {{attribute}}
                                    </td>
                                  </tr>
                                </table>
                              </div>
                              <div class="dropdown-item inputSampleList myw-scrollbar">
                                <label style="font-weight: bold;"> StopWords :-</label>
                                <table>
                                  <tr *ngFor="let stopword of useCaseStopWords">
                                    <td>
                                      {{stopword}}
                                    </td>
                                  </tr>
                                </table>
                              </div>
                            </div>
                          </div>
                        </span>
                      </td>
                      <td><span class="inputSampleList">{{usecases.Description}} </span> </td>
                      <td>{{usecases.ApplicationName}}</td>
                      <td>

                        <input class="btn btn-primary " title="Train UseCase" type="button"
                          [disabled]="selectedusecaseSampleInputBtnIndex !== i || disableUseCaseTrain === true"
                          value="Train UseCase" (click)="trainSelectedUseCase(usecases,isDeveloperPrediction)">

                      </td>
                      <td style="text-align: center;">
                        <a style="cursor: pointer;" *ngIf="usecases.CreatedBy == userId"
                          (click)="deleteUseCaseModel(usecases)">
                          <img style="height: 20px;" src="assets/images/delete.svg" />
                        </a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
            </section>
          </ng-container>
          <div class="mt-2">Please contact ingrain tech <a href=mailto:ingrAIn_Tech_Support@accenture.com
              target="_blank" rel="noopener noreferrer" style="text-decoration: underline">support team</a> if you wish
            to consume these services. </div>
        </div>
      </div>
    </div>
  </div>
</div>



<ng-template #FileEntityOptionToUpload>
  <h6 class="fs-14 myw-500 mb-3">How do you want to upload the file? Below are the possible options:</h6>
  <div class="form-group mb-2">
    <div class="form-inline">
      <label class="myw-checkbox"><input type="radio" name="radio-file" (click)="setFileView()"
          [checked]='fileView'><span>Upload
          File</span></label>
      <label class="myw-checkbox"><input type="radio" name="radio-file" (click)="setEntityView()"
          [checked]='entityView'><span>Entity</span></label>
      <label class="myw-checkbox"><input type="radio" name="radio-file" (click)="setDatasetView()"
          [checked]='datasetView'><span>Dataset</span></label>
      <label class="myw-checkbox" *ngIf="isAdminUser && (selectedServiceId === '72c38b39-c9fe-4fa6-97f5-6c3adc6ba355' || selectedServiceId === '93df37dc-cc72-4105-9ad2-fd08509bc823')"><input type="radio" name="radio-file" (click)="setCustomDataView()"
          [checked]='customDataView'><span>Custom Data</span></label>
    </div>
  </div>
</ng-template>

<ng-template #uploadTemplateSection>
  <div class="myw-upload">
    <div class="row">
      <div class="col-4">
        <div class="myw-upload-link">
          <h6 class="myw-500">Upload File</h6>
          <p *ngIf="isClustering!=true && isWordCloud!=true" style="font-size: 12px;">Please Download the template and
            upload relevant data to train the model.</p>
          <p *ngIf="isClustering==true" style="font-size: 12px;">Please upload relevant data to train the model and
            ensure the file uploaded should be in English Language.</p>
          <p *ngIf="isWordCloud==true" style="font-size: 12px;">Please upload relevant data to generate the word cloud.
          </p>
          <a href="#" (click)='downloadData()' *ngIf="isClustering!=true && isWordCloud!=true">
            <img src="assets/images/doc-download-icon.svg" alt="Export the password protected file, click on info icon to know the password hint">
            <span>Download predefined template</span>
          </a>
        </div>
      </div>
      <div class="col-8">
        <div (dragover)='allowDrop($event)' (drop)='onDrop($event)'
          class="d-flex flex-column align-items-center justify-content-center myw-upload-drag"
          style="min-height: 5rem;">
          <label class="fs-12 text-secondary" style="cursor: pointer;">
            <img src="assets/images/browser-ai.svg" alt="browse">
            <input type="file" id="myInput" #fileInput type="file" style="display:none;" class="" value=""
              accept="{{allowedFileType}}" (change)="getFileDetails($event)" (click)="$event.target.value = null">
          </label>
          <div class="myw-upload-sec">
            <div class="myw-upload-browse d-flex flex-column align-items-center justify-content-center">
              <label class="fs-12 text-secondary" style="cursor: pointer;">
                <span>Drag &amp; Drop or <strong class="hyperlink">Browse Files</strong></span>
                <input type="file" id="myInput" #fileInput type="file" style="display:none;" class="" value=""
                  accept="{{allowedFileType}}" (change)="getFileDetails($event)" (click)="$event.target.value = null">
              </label>
            </div>
          </div>
          <div class="myw-upload-file" *ngIf="uploadedData.length>0 && templateFlag == '1'">
            <div class="myw-file-item d-flex align-items-center mb-0">
              <div class="flex-fill d-flex align-items-center">
                <h6>{{uploadedData[0].name}}</h6>
                <div class="flex-fill">
                  <div class="progress">
                    <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0"
                      aria-valuemax="100" style="width: 100%;"></div>
                  </div>
                  <small class="text-success">File Uploaded Successfully </small>
                </div>
                <span>100%</span>
              </div>
              <a href="#" title="Remove" aria-label="Remove" (click)="uploadedData = []; false;"></a>
              <button class="btn btn-primary" (click)="onSubmit()">Apply</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #entitySection>
  <div class="col-3" *ngIf="!(env=='FDS' && (requestType=='AM' || requestType=='IO'))">
    <div class="form-group mb-3" [formGroup]="entityFormGroup">
      <ng-container *ngIf="reTrainModel == false">
        <mat-form-field>
          <mat-label>Delivery Type</mat-label>
          <ng-container>
            <mat-select #deliveryType formControlName="deliveryTypeControl" [(value)]="selectedDeliveryType"
              (ngModelChange)="onChangeOfDeliveryType(deliveryType.value)">
              <ng-container *ngIf="deliveryTypeList.length>0">
                <mat-option *ngFor="let deliveryType of deliveryTypeList" matTooltip="{{deliveryType}}"
                  [value]="deliveryType">
                  {{deliveryType}}
                </mat-option>
              </ng-container>
              <ng-container *ngIf="deliveryTypeList.length==0">
                <mat-option value="">Select Delivery Type</mat-option>
              </ng-container>
            </mat-select>
          </ng-container>

          <mat-error *ngIf="entityFormGroup.get('deliveryTypeControl').invalid">Please Choose Delivery
            Type
          </mat-error>
        </mat-form-field>
      </ng-container>

      <ng-container *ngIf="reTrainModel == true">
        <mat-form-field>
          <mat-label>Delivery Type</mat-label>
          <mat-select #deliveryType formControlName="deliveryTypeControl" [(ngModel)]="selectedDeliveryType"
            [disabled]="reTrainModel == true">
            <mat-option matTooltip="{{selectedDeliveryType}}" [(value)]="selectedDeliveryType">
              {{selectedDeliveryType}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </ng-container>
    </div>
  </div>

  <div class="col-3">
    <div class="form-group mb-3" [formGroup]="entityFormGroup">
      <mat-form-field>
        <input matInput formControlName="startDateControl" [matDatepicker]="picker1" placeholder="Start Date"
          [max]="startDate">
        <mat-datepicker-toggle matSuffix [for]="picker1"><svg class="ingrAI-icon-svg ingrAI-icon-svg-md">
            <use xlink:href="#ingrAI-icon-calender"></use>
          </svg></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
        <mat-error *ngIf="entityFormGroup.get('startDateControl').invalid">Start Date
        </mat-error>
      </mat-form-field>
    </div>
  </div>
  <div class="col-3">
    <div class="form-group mb-3" [formGroup]="entityFormGroup">
      <mat-form-field>
        <input #endDateInput formControlName="endDateControl" matInput [matDatepicker]="picker2" placeholder="End Date"
          [min]="startDate" [max]="startDate">
        <mat-datepicker-toggle matSuffix [for]="picker2"><svg class="ingrAI-icon-svg ingrAI-icon-svg-md">
            <use xlink:href="#ingrAI-icon-calender"></use>
          </svg></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
        <mat-error *ngIf="entityFormGroup.get('endDateControl').invalid">End Date
        </mat-error>
      </mat-form-field>
    </div>
  </div>
  <!-- <div class="col-3">
    <div class="form-group mb-3" [formGroup]="entityFormGroup">
      <ng-container *ngIf="reTrainModel == false">
        <mat-form-field>
          <mat-label>Choose Data</mat-label>
          <ng-container>
            <mat-select #entityInput formControlName="entityControl" (ngModelChange)="onChangeOFEntity()"
              [(value)]="selectedEntity"
              [disabled]="entityFormGroup.get('startDateControl').value=='' || entityFormGroup.get('endDateControl').value==''">
              <ng-container *ngIf="entityList.length>0">
                <mat-option *ngFor="let entity of entityList" matTooltip="{{entity.sub}}" [value]="entity.name">
                  {{entity.name}}
                </mat-option>
              </ng-container>
              <ng-container *ngIf="entityList.length==0">
                <mat-option value="">Select Data</mat-option>
              </ng-container>
            </mat-select>
          </ng-container>
          <mat-error *ngIf="entityFormGroup.get('entityControl').invalid">Please Choose Entity Type
          </mat-error>
        </mat-form-field>
      </ng-container>

      <ng-container *ngIf="reTrainModel == true">
        <mat-form-field>
          <mat-label>Choose Data</mat-label>
          <ng-container>
            <mat-select #entityInput formControlName="entityControl" [(ngModel)]="selectedEntity"
              [disabled]="reTrainModel == true">
              <mat-option matTooltip="{{selectedEntity}}" [value]="selectedEntity">
                {{selectedEntity}}
              </mat-option>
            </mat-select>
          </ng-container>
        </mat-form-field>
      </ng-container>
    </div>
  </div> -->

  <div class="col-3">
    <div class="form-group mb-3" [formGroup]="entityFormGroup">
      <mat-form-field>
        <mat-label>Choose Data</mat-label>
        <ng-container *ngIf="reTrainModel == false">
          <mat-select #entityInput formControlName="entityControl" (ngModelChange)="onChangeOFEntity()"
            [(value)]="selectedEntity"
            [disabled]="entityFormGroup.get('startDateControl').value=='' || entityFormGroup.get('endDateControl').value=='' || reTrainModel == true">
            <ng-container *ngIf="(env=='FDS' || env=='PAM') && (requestType=='AM' || requestType=='IO')">
              <mat-option *ngFor="let entity of entityList2" matTooltip="{{entity.sub}}" [value]="entity.name">
                {{entity.name}}
              </mat-option>
            </ng-container>
            <ng-container *ngIf="entityList.length>0">
              <mat-option *ngFor="let entity of entityList" matTooltip="{{entity.sub}}" [value]="entity.name">
                {{entity.name}}
              </mat-option>
            </ng-container>
            <ng-container *ngIf="entityList.length==0 && !((env=='FDS' || env=='PAM') && (requestType=='AM' || requestType=='IO'))">
              <mat-option value="">Select Data</mat-option>
            </ng-container>
          </mat-select>
        </ng-container>
        <ng-container *ngIf="reTrainModel == true">
          <mat-select formControlName="entityControl" [(ngModel)]="selectedEntity" disabled>
            <mat-option matTooltip="{{selectedEntity}}" [(value)]="selectedEntity">
              {{selectedEntity}}
            </mat-option>
          </mat-select>
        </ng-container>
        <mat-error *ngIf="entityFormGroup.get('entityControl').invalid">Please Choose Entity Type
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div *ngIf="trainingDataVolume" class="col-3 mt-3">
    <div class="form-group">
      <label class="form-label myw-required">Provide Training Data Volume</label>
      <app-info-tooltip>
        <div class="htmlDesignedTooltip" style="padding-left: 10rem !important;">
          Provide Training Data Volume as:
          <div>
            <ul>
              <li>
                Model Templates can be utilized to create new
                Private/Public
                models either through user interface or custom
                API.
              </li>
              <li>
                The value specified over here puts a limit on
                the maximum
                number of records that can be fetched while
                new model creation.
              </li>
            </ul>
          </div>
        </div>
      </app-info-tooltip>
      <input type="text" class="form-control" value="provideTrainingDataVolume" name="provideTrainingDataVolume"
        [(ngModel)]="provideTrainingDataVolume" maxlength="70" (ngModelChange)="onValueChange($event)" style="width: 11.68rem;">
        <label class="form-label">You have {{ 70 - provideTrainingDataVolume?.length}} of 70 characters remaining.</label>
    </div>
  </div>
    <div class="col-3" *ngIf="!isWordCloud">
    <label class="myw-checkbox">
      <input #offlineRetrainingSelected type="checkbox" (change)="checkboxSelectedIsOffline(offlineRetrainingSelected)">
      <span style="margin-top: 1rem;">Carry out Retraining</span>
    </label>
    <div class="row">
      <div class="col-6">
        <mat-form-field style="width: 7.7rem;">
          <mat-select placeholder="Frequency" [disabled]="!selectedOfflineRetrain" (selectionChange)="selectedRetrainingFrequency(selectedRFrequency)"
            [(ngModel)]="selectedRFrequency">
            <mat-option *ngFor="let rfrequency of
          reTrainingFrequency" [value]="rfrequency">
              {{rfrequency.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-6">
        <ng-container>
          <mat-form-field style="width: 7.7rem;">
            <mat-select placeholder="Frequency Value" [disabled]="!selectedRFrequency" (selectionChange)="selectedRFeqValue(selectedRFeqValues)"
              [(ngModel)]="selectedRFeqValues">
              <mat-option *ngFor="let freqVal of
                reTrainingFrequencyValue" [value]="freqVal">
                {{freqVal}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </div>
    </div>
  </div>

  <ng-container *ngIf="reTrainModel == false">
    <div class="myw-upload-file" *ngIf="entityArray.length > 0">
      <div class="myw-file-item d-flex align-items-center mb-0">
        <div class="flex-fill d-flex align-items-center">
          <h6 *ngIf="(env=='FDS' || env=='PAM') && (requestType=='AM' || requestType=='IO')">Entity - {{selectedEntity}}</h6>
          <h6 *ngIf="!((env=='FDS' || env=='PAM') && (requestType=='AM' || requestType=='IO'))">Entity - {{entityArray[0].name}}</h6>
          <div class="flex-fill">
            <div class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"
                style="width: 100%;"></div>
            </div>
          </div>
          <span>100%</span>
        </div>
        <a href="#" title="Remove" aria-label="Remove" (click)="removeEntity()"></a>
        <button class="btn btn-primary" (click)="onSubmit()" [disabled]="trainingDataVolume && !isValidDataVolume">Apply</button>
      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="reTrainModel == true">
    <div class="myw-upload-file">
      <div class="myw-file-item d-flex align-items-center mb-0">
        <div class="flex-fill d-flex align-items-center">
          <h6>Entity - {{selectedEntity}}</h6>
          <div class="flex-fill">
            <div class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"
                style="width: 100%;"></div>
            </div>
          </div>
          <span>100%</span>
        </div>
        <!-- <a href="#" title="Remove" aria-label="Remove" (click)="removeEntity()"></a> -->
        <button class="btn btn-primary" (click)="onSubmit()" [disabled]="trainingDataVolume && !isValidDataVolume">Apply</button>
      </div>
    </div>
  </ng-container>

</ng-template>

<ng-template #datasetViewTemplate>
  <div class="col-3">
    <div>
      <div class="myw-500">My Data Source</div>
      <table style="width: 100%;">
        <tr>
          <td style="width: 50%;">
            <div>
              <table>
                <tr>
                  <td>
                    <mat-form-field class="w-100">
                      <mat-label>Source</mat-label>
                      <mat-select (selectionChange)="selectedchoosesource(selectedsource)" name="selectedsource"
                        [(ngModel)]="selectedsource">
                        <mat-option *ngFor="let type of choosesource" [value]="type.value">
                          {{type.name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>&nbsp;&nbsp;
                  <td>
                    <mat-form-field class="w-100">
                      <mat-label>Choose type</mat-label>
                      <mat-select (selectionChange)="selectedchoosetype(selectedtype)"
                        (ngModelChange)="onChangeOfDataset()" name="selectedtype" [(ngModel)]="selectedtype">
                        <mat-option *ngFor="let type of choosetype" [value]="type.id">
                          {{type.name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>
                </tr>
              </table>
            </div>
          </td> &nbsp;&nbsp;
        </tr>
      </table>
    </div>
  </div>

  <div class="myw-upload-file" *ngIf="datasetEntered">
    <div class="myw-file-item d-flex align-items-center mb-0">
      <div class="flex-fill d-flex align-items-center">
        <h6>Dataset - {{datasetname2}}</h6>
        <div class="flex-fill">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"
              style="width: 100%;"></div>
          </div>
        </div>
        <span>100%</span>
      </div>
      <a href="#" title="Remove" aria-label="Remove" (click)="removeDataset()"></a>
      <button class="btn btn-primary" (click)="onSubmit()">Apply</button>
    </div>
  </div>
</ng-template>


<ng-template #tableRowView>

  <tr *ngFor="let model of trainedModels; let i = index">
    <td>
      <label class="myw-checkbox myw-radio myw-inline">
        <input type="radio" *ngIf="isClustering!=true" name="model_name" value="{{model.CorrelationId}}"
          (change)="selectModel(model)">
        <input type="radio" *ngIf="isClustering==true" name="model_name" value="{{model.CorrelationId}}"
          (change)="selectModel(model,model.selectedModelType)">
        <span></span></label>
    </td>
    <td style="max-width: 9em;">{{model.ModelName}}</td>
    <td style="width: 36em;">{{model.PredictionURL}}</td>
    <td *ngIf="isDeveloperPrediction !=true && isClustering != true">{{model.DataSource}}</td>
    <td>{{model.ModifiedOn}}</td>
    <td *ngIf="isClustering == true">
      <ng-container *ngIf="model.modelTypes.length > 1">
        <select #modelTypeSelection class="form-control"
          (change)="modelTypeChange(modelTypeSelection.value,model.CorrelationId)">
          <option *ngFor="let option of model.modelTypes" value='{{option}}'>{{option}}</option>
        </select>
      </ng-container>
      <ng-container *ngIf="model.modelTypes.length == 1 || model.modelTypes.length == 0">
        <span>{{model.modelTypes}}</span>
      </ng-container>
    </td>
    <td *ngIf="isClustering == true">{{model.pageInfo}}</td>
    <td *ngIf="isDeveloperPrediction==true">{{model.LastTrainedBy}}</td>
    <td title="{{model.StatusMessage}}">{{model.ModelStatus}}</td>
    <!-- <td style="text-align: center;"> -->
    <!-- <a style="cursor: pointer;" (click)="deleteModel(model)">
        <img style="height:15%;" src="assets/images/delete.svg" />
      </a> -->
    <td>
      <div class="myw-actions" style="display: inline-flex;">

        <label style="color: #004dff; cursor: pointer;"
          *ngIf="model.ModelStatus != 'Completed' && model.ModelStatus != 'InProgress' && model.ModelStatus != 'Upload InProgress' && model.ModelStatus != 'Warning'  && model.ModelStatus != 'Progress' && isClustering == false"
          (click)="( similarityAnalysis == true) ? trainSimModel(model.CorrelationId) : trainRetrain(false, model.CorrelationId)">Train
          Model</label>

        <label style="color: #004dff;cursor: pointer;"
          *ngIf="model.ModelStatus == 'InProgress' || model.ModelStatus == 'Upload InProgress' || model.ModelStatus == 'Warning' || model.ModelStatus == 'Progress' && isClustering == false"
          style="cursor: none;color: grey;">Train Model</label>

        <label style="color: #004dff;cursor: pointer;" *ngIf="model.ModelStatus == 'Completed' && isClustering == false"
          (click)="( similarityAnalysis == true) ? reTrainSimModel(model.CorrelationId) : trainRetrain(true, model.CorrelationId)">ReTrain
          Model</label>
      </div>
    </td>
    <td
      *ngIf="selectedServiceId != '28179a56-38b2-4d69-927d-0a6ba75da377' && selectedServiceId != '50f2232a-0182-4cda-96fc-df8f3ccd216c' && isClustering != true">
      <div style="text-align: center;"
        *ngIf="selectedServiceId != '28179a56-38b2-4d69-927d-0a6ba75da377' && selectedServiceId != '50f2232a-0182-4cda-96fc-df8f3ccd216c' && isClustering != true">
        <a href="#" title="Publish UseCase" aria-label="Publish UseCase" *ngIf="model.ModelStatus == 'Completed'"
          class="ml-auto mr-3" (click)="saveUsecase(model,i);">
          <img src="assets/images/publish_usecase.svg" alt="Publish UseCase" />
        </a>
      </div>
    </td>
    <td>
      <a href="#" title="Delete" aria-label="Delete" (click)="deleteModel(model)"><img src="assets/images/delete.svg"
          alt="Delete" style="height: 20px;"></a>
    </td>
    <td>
      <a *ngIf="model.ModelStatus != 'Error' && model.ModelStatus != 'InProgress' && model.ModelStatus != 'Upload InProgress' && model.ModelStatus != 'Warning'  && model.ModelStatus != 'Progress'"
        (click)="getRecordCount(model)" class="myw-navbar-action" role="button" matTooltip="View Record Count"
        data-toggle="modal" data-target="#sampledataModal" data-toggle-tooltip="tooltip" data-placement="bottom"
        data-trigger="hover"><img src="assets/images/summary.svg" alt="View Sample Data" /></a>
    </td>
  </tr>
</ng-template>


<ng-template #evaluateModelButtonTemplate>
  <label class="myw-toggle-switch ingrain-switch myw-inline my-3">
    <input type="checkbox">
    <span class="label-first fs-12" (click)="openResponse('formattedResponse')">Formatted Response</span>
    <span class="label-last fs-12" (click)="openResponse('rawEvaluatedData')">Raw Response</span>
  </label>
</ng-template>

<ng-template #ClusteringTextNotTextOptions>
  <div class="pt-3">
    <p>You can modify the below settings to get custom outcome.</p>
    <div class="row flex-wrap">
      <div class="col-4 col-lg-3">
        <div class="form-group d-flex flex-column mb-0">
          <label class="form-label" style="font-size: .875rem; font-weight: 600; color: black;">Type</label>
          <label class="myw-switch mb-0">
            <input #toogle type="checkbox" [disabled]="disabledTextNontext" (change)="setClusterType(toogle)">
            <span class="label-first">Text </span>
            <span class="switch-toggle"></span>
            <span class="label-last">Non-Text</span>
          </label>
        </div>
      </div>
      <div class="col-8 col-lg-4 d-flex myw-actions">
        <div class="form-group d-flex flex-column mb-0">
          <label class="form-label" style="font-size: .875rem; font-weight: 600; color: black;">K-Means</label>
          <label class="myw-switch mb-0">
            <input type="checkbox" #switch1 type="checkbox" [id]="switches[0]"
              (click)="onSwitchChanged(switch1,'KMeans')">
            <span class="label-first">Off</span>
            <span class="switch-toggle"></span>
            <span class="label-last">On</span>
          </label>
        </div>
        <div class="form-group d-flex flex-column mb-0" style="margin-top: .3rem !important;"
          *ngIf="selectedOptions.KMeans.Train_model === 'True'">
          <div class="form-label">&nbsp;</div>
          <div class="form-inline">
            <label class="myw-checkbox"><input type="radio" name="radiocus" (click)="onClusterChange('Auto')"
                checked><span>Auto</span></label>
            <label class="myw-checkbox"><input type="radio" name="radiocus"
                (click)="onClusterChange('Cluster')"><span>Custom</span></label>
          </div>
        </div>
        <div class="form-group d-flex flex-column mb-0 mt-2" style="margin-top: 0.98rem !important;"
          *ngIf="selectedOptions.KMeans.Train_model === 'True'">
          <input type="number" class="form-control myw-clusteringfc" #clusterinput min="2" max="15" step="1"
            value="numberOfCluster" (change)="onClusterChange('ClusterNumber', clusterinput.value)" />
        </div>
      </div>
      <div class="col-6 col-lg-auto">
        <div class="form-group d-flex flex-column justify-content-end mb-0">
          <label class="form-lable" style="font-size: .875rem; font-weight: 600;">DBSCAN</label>
          <label class="myw-switch mb-0">
            <input type="checkbox" #switch3 name="onoffswitch" [id]="switches[2]"
              (click)="onSwitchChanged(switch3,'DBSCAN')">
            <span class="label-first">Off</span>
            <span class="switch-toggle"></span>
            <span class="label-last">On</span>
          </label>
        </div>
      </div>
      <div class="col-4 col-lg-3 ng-tns-c327-0" style="padding-left: 5%;"
        [ngClass]="{'disable-pointer' : problemType['Clustering']['Non-Text'] == 'True'}">
        <div class="form-group">
          <label class="form-lable" style="font-size: .875rem; font-weight: 600;">N-gram Selector</label>&nbsp;
          <app-info-tooltip class="ml-auto" [description]="'AI-Ngram'" [className]="'Ngram'"></app-info-tooltip>
          <div class="ingrain-slider d-flex align-items-center">
            <span class="myw-checkbox">{{' 1 '}}</span>
            <ng5-slider [(value)]="ngramOne" [(highValue)]="ngramTwo" [options]="options"></ng5-slider>
            <span class="myw-checkbox">{{' 4 '}}</span>
          </div>
        </div>
      </div>
      <div style="width: 100%;">
        <label class="form-lable" style="font-size: .875rem; font-weight: 600;padding-left: 1%;">Stop Words</label>
        <div style="padding-left: 1%;">
          <span style="color: gray;"><i>Add the stop words to be removed from cluster names before Training the
              model</i></span>
        </div>
        <div class="d-inline-flex col-11" style="width: 31%;">
          <div>
            <input #stopWords type="text" class="form-control col-12" maxlength="70" [(ngModel)]="stopWordscluster"
              placeholder="Type" [disabled]="problemType['Clustering']['Non-Text'] == 'True'">
            <label class="form-label">You have {{ 70 - stopWordscluster?.length}} of 70 characters remaining.</label>
          </div>
          <input class="form-control col-1 btn btn-primary mx-2" title="Add" type="button" value="Add"
            (click)="addStopWords()" [disabled]="problemType['Clustering']['Non-Text'] == 'True'">
        </div>
        <div class="ingrain-slider d-flex col-10 align-items-center m-3"
          style="margin: 1rem 0rem 1rem 0rem !important;">
          <div class="d-inline-flex" style="flex-wrap: wrap;">
            <div class="ingrAIn-feature-filter-item" *ngFor="let stopword of clusteringSW, let i = index">
              <span>{{stopword}} </span>
              <span class="item-close" (click)="removeclusterstopWords(i)">x</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<div *ngIf="enableRecordsCountView" class="modal show" data-backdrop="static" data-keyboard="false" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="ingrAI-enter-model-title">&nbsp;</h5>
      <button type="button" class="close" aria-label="Close" (click)="enableRecordsCountView = false"></button>
      </div>
      <div class="modal-body">
        <div class="form">
          <div class="form-group">
            <span> {{RecordsCountMessage}} </span>
          </div>
          <div class="d-flex justify-content-end myw-actions">
            <button class="btn btn-sm btn-primary" data-dismiss="modal"
              (click)="enableRecordsCountView = false">OK</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>