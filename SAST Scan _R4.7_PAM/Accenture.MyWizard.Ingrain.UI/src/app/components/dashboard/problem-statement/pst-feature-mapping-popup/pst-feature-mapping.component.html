<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="fMappingModalTitle">Feature Mapping</h5>
      <button type="button" class="close" aria-label="Close" (click)="onClose()">
        <span aria-hidden="true">&nbsp;</span>
      </button>
    </div>
    <div class="modal-body myw-scrollbar">
      <div class="ingrain-main-container myw-scrollbar my-2">
        <div class="myw-section my-3 position-relative h-100">
          <div class="table-responsive">
            <table class="table table-striped table-hover table-vmiddle myw-table">
              <thead>
                <tr>
                  <th class="data-curation-heading" scope="col" id="truncate-data">Feature</th>
                  <th class="data-curation-heading column-datatype" scope="col">Mapping</th>
              </thead>
              <tbody>
                <tr  *ngFor="let exitingTempleteFeatureCol of existingColumnList; let i=index">
                  <td>
                    <ng-container *ngIf='!ifTimeSeriesModel'>
                      <div [ngClass]="!isTargetColMapped? {'targetcol-validation': selectedIndex==i}: (	
                  !isUniqueIdentifierMap?{'targetcol-validation': selectedUniqueIndex==i}: '')"
                        style="padding: 8px 0px 6px 0px;">
                        {{exitingTempleteFeatureCol}} <span class="mark-mandatory" *ngIf="i==0 || i==1">*</span>
                        <span *ngIf="i> countofExistingColList" class="deletIcon"
                          (click)=" delete(exitingTempleteFeatureCol,i)">X</span>
                      </div>
                    </ng-container>
                    <!-- <ng-container *ngIf='ifTimeSeriesModel'>
                      <div [ngClass]="!isTargetColMapped? {'targetcol-validation': selectedIndex==i}: ''"
                        style="padding: 8px 0px 6px 0px;">
                        {{exitingTempleteFeatureCol}} <span class="mark-mandatory" *ngIf="i==0">*</span>
                        <span *ngIf="i> countofExistingColList" class="deletIcon"
                          (click)=" delete(exitingTempleteFeatureCol,i)">X</span>
                      </div>
                    </ng-container> -->

                    <ng-container *ngIf='ifTimeSeriesModel'>
                      <!-- <div [ngClass]="!isTargetColMapped? {'targetcol-validation': selectedIndex==i}: ''"	
                        style="padding: 8px 0px 6px 0px;"> -->
                      <div [ngClass]="!isTargetColMapped? {'targetcol-validation': selectedIndex==i}: (	
                          !isTimeSeresDateColumnMapped?{'targetcol-validation': selectedTimeDateColIndex==i}: '')"
                        style="padding: 8px 0px 6px 0px;">
                        {{exitingTempleteFeatureCol}} <span class="mark-mandatory" *ngIf="i==0 || i==1">*</span>
                        <span *ngIf="i> countofExistingColList" class="deletIcon"
                          (click)=" delete(exitingTempleteFeatureCol,i)">X</span>
                      </div>
                    </ng-container>

                  </td>
                  <td>
                    <div class="form-group mb-0">
                      <select #select class="form-control"  [id]="'select' + i"
                        (change)='onMappingOptionSelected(exitingTempleteFeatureCol,select.value,i)'>
                        <option [ngValue]="undefined" disabled selected="{{resetValue}}">Select Mapping</option>

                        <!-- <option *ngFor='let mappingColumnList of getColumnsData(exitingTempleteFeatureCol,i); let j=index' [selected]='j == 0'> -->

                        <ng-container
                          *ngFor='let mappingColumnList of getColumnsData(exitingTempleteFeatureCol,i); let j=index'>
                          <ng-container *ngIf='mappingColumnList !== ""'>
                            <option *ngIf="mappingColumnList === exitingTempleteFeatureCol" selected='true'>
                              {{mappingColumnList}}
                            </option>
                            <option *ngIf="mappingColumnList !==exitingTempleteFeatureCol">
                              {{mappingColumnList}}
                            </option>
                          </ng-container>

                        </ng-container>

                      </select>
                    </div>
                  </td>
                </tr>
              </tbody>

            </table>
          </div>
        </div>
      </div>


      <div class="d-flex justify-content-end myw-actions">
        <ng-container *ngIf='!displayaddCustomColumn'>
          <button type="button" class="btn btn-secondary" (click)="resetMappingColumns()">Reset</button>
          <button type="button" class="btn btn-secondary" (click)="toggleCustomColumn()">Add Custom Column</button>
          <button type="button" class="btn btn-primary" (click)='applyColumnMapping()'>Apply</button>
        </ng-container>

        <ng-container *ngIf='displayaddCustomColumn'>
          <input #customValueTextBox type="text" name="CustomColumn" maxlength="70" id="addCustomColumn">
          <label class="form-label">You have {{ 70 - customValueTextBox.value?.length}} of 70 characters remaining.</label>
          <button type="button" class="btn btn-secondary" (click)="resetMappingColumns()">Reset</button>
          <button type="button" class="btn btn-secondary" (click)="toggleCustomColumn()">Cancel</button>
          <button type="button" class="btn btn-primary"
            (click)="addCustomColumn(customValueTextBox.value)">Enter</button>
        </ng-container>
      </div>
    </div>
  </div>
</div>



<ng-template #confirmValidRecModels> 
      <div class="deploymodle-confirmpopup">
        <div class="modal-header" style="border-bottom: none;">
          <h5 class="modal-title">&nbsp;</h5>
          <button type="button" class="close pull-right" style="cursor: pointer;" aria-label="Close"
            (click)="decline()">
            <svg class="ingrAI-icon-svg ingrAI-icon-svg-md">
              <use xlink:href="#ingrAI-icon-close"></use>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          {{validRecMessage}}
          <div class="modal-footer" style="border-top: none;">      
            <ng-container *ngIf='!ifLessRecords'>
              <button type="button" class="btn btn-primary" (click)='onConfirm()'>Ok</button>
            </ng-container>
            <ng-container *ngIf='ifLessRecords'>
              <button type="button" class="btn btn-primary" (click)='redirectToDashboard()'>No</button>
              <button type="button" class="btn btn-primary" (click)='onConfirm()'>Yes</button>
            </ng-container>
          </div>
        </div>
      </div>   
</ng-template>