<div class="d-flex flex-nowrap justify-content-end">
    <div class="myw-navbar-search" *ngIf="toggle" (click)="toggle = !toggle">
        <input type="text" class="form-control form-control-sm" maxlength="70" [(ngModel)]="searchText"
            (input)="searchModel($event.target.value)" placeholder="Search..." />
        <img src="assets/images/close.svg" alt="Close" (click)="toggle = !toggle; clearSearch()" />
    </div>
    <div *ngIf="!toggle" style="display:inline-flex; margin-right: 1em;">
        <input type="text" class="form-control form-control-sm" maxlength="70" [(ngModel)]="searchText"
            (input)="searchModel($event.target.value)" placeholder="Search..."
            style="width: 11.5rem;" />
        <img src="assets/images/close.svg" alt="Close" (click)="toggle = !toggle; clearSearch()" />
    </div>
</div>
<div class="myw-section my-3">
    <div class="table-responsive" [ngClass]="totalRec <=5 ? 'modeldetails-tbl' :
        ''">
        <table class="table table-striped table-hover table-vmiddle myw-table">
            <thead>
                <tr>
                    <th scope="col">Model Name</th>
                    <th scope="col">Published Date</th>
                    <th scope="col">Final Model</th>
                    <th scope="col">Accuracy</th>
                    <th scope="col">Cascaded</th> <!-- class="text-center" -->
                    <th scope="col">Status</th>
                    <th scope="col">Health</th>
                    <th scope="col">Visualisation</th>
                    <th scope="col">Web Services</th>
                    <th scope="col">Category</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let model of listOfArchivedModels | paginate: { id:
                    'listing_pagination2',
                    itemsPerPage: itemsPerPage,
                    currentPage: page
                    }; let i= index">
                    <td>
                        <div *ngIf="!model.IsCascadeModel"
                            class="d-flex">
                            <ng-container *ngIf="model.IsFMModel
                                === false ||
                                model.IsFMModel === null">
                                <a
                                    routerLink="/dashboard/problemstatement/usecasedefinition"
                                    (click)=setCorrelationIdinLocalStorage(model.CorrelationId,model.IsReadOnlyAccess)
                                    (click)=setModelNameinLocalStorage(model.ModelName,model.ModelVersion)
                                    [queryParams]="{ 'modelName':
                                    model.ModelName,'pageSource':
                                    'true'}">
                                    {{model.ModelName}}</a>
                            </ng-container>
                            <ng-container *ngIf="model.IsFMModel === true">
                                <ng-container
                                    *ngIf="model.FmModelStaus !== null && model.FmModelStaus !== undefined">
                                    <ng-container
                                        *ngIf="model.FmModelStaus.Status === 'C'">
                                        <a
                                            routerLink="/dashboard/problemstatement/usecasedefinition"
                                            (click)=setCorrelationIdinLocalStorage(model.CorrelationId,model.IsReadOnlyAccess)
                                            (click)=setModelNameinLocalStorage(model.ModelName,model.ModelVersion)
                                            [queryParams]="{ 'modelName':
                                            model.ModelName,'pageSource':
                                            'true'}">
                                            {{model.ModelName}}</a>
                                        <span *ngIf="model.Status != 'Deployed'" title="Completed" class="fm-status success"></span>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="model.FmModelStaus.Status === 'P' || model.FmModelStaus.Status === 'E' ||
                                        model.FmModelStaus.Status === 'null'">
                                        <a href="javascript:;"
                                            (click)="FMModelInProgressPopup(FMInProgressPopup,
                                            model.FmModelStaus.Status)">{{model.ModelName}}</a>
                                        <span title="Error" class="fm-status error" *ngIf="model.FmModelStaus.Status === 'E'"></span>
                                        <span title="In Progress" class="fm-status inprogress" *ngIf="model.FmModelStaus.Status ===
                                            'P' ||
                                            model.FmModelStaus.Status
                                            ===
                                            'null'"></span>
                                    </ng-container>
                                </ng-container>
                                <ng-container
                                    *ngIf="model.FmModelStaus === null || model.FmModelStaus === undefined">
                                    <a href="javascript:;" (click)="FMModelInProgressPopup(FMInProgressPopup, 'P')">{{model.ModelName}}</a>
                                    <span title="In Progress" class="fm-status inprogress"></span>
                                </ng-container>
                            </ng-container>
                        </div>
                        <div *ngIf="model.IsCascadeModel"><a
                                (click)="navigateToCascadeModels(model)"
                                routerLink="/dashboard/problemstatement/cascadeModels/chooseCascadeModels"
                                [queryParams]="{ 'cascadedId':
                                model.CorrelationId,'category':
                                model.Category}">
                                {{model.ModelName}}</a>
                        </div>
                    </td>
                    <td>{{model.DeployedDate}}</td>
                    <td>{{model.ModelVersion}}</td>
                    <td>
                        <div *ngIf="model.Status == 'Deployed'"> {{model.Accuracy}}%</div>
                        <div *ngIf="model.Status == 'In Progress'"> NA</div>
                    </td>
                    <td>
                        <div align="center" *ngIf="model.IsCascadeModel ==  true">
                            <label class="optioncontainer pl-0">
                                <input type="checkbox" name="cascaded" checked>
                                <span class="op-radiobtn"></span>
                            </label>
                        </div>
                        <div align="center" *ngIf="model.IsCascadeModel == false || model.IsCascadeModel == undefined">
                            <label class="optioncontainer pl-0">
                                <input type="checkbox" name="cascaded">
                                <span class="disabled-op-radiobtn"></span>
                            </label>
                        </div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="pr-2"> {{model.Status}}</div>                          
                        </div>
                    </td>
                    <td>
                        <div class="pt-1" *ngIf="model.ModelHealth" style="display: inline-flex; cursor: pointer;">
                            <a routerLink="/dashboard/deploymodel/Monitoring" (click)=setCorrelationIdinLocalStorage(model.CorrelationId,model.IsReadOnlyAccess)
                                (click)=setModelNameinLocalStorage(model.ModelName,model.ModelVersion)
                                [queryParams]="{ 'modelName': model.ModelName}" style="text-decoration: none; color: black;">
                                <span *ngIf="model.ModelHealth == 'Healthy'" class="spandot" style="background-color: #21ba41;
                                    margin-top: 5px;"></span>
                                <span *ngIf="model.ModelHealth !=  'Healthy'" class="spandot" style="background-color: #d32f2f;
                                    margin-top: 5px;"></span>
                                <span style="vertical-align: middle;">
                                    {{model.ModelHealth}}</span>
                            </a>
                        </div>
                        <div class="pt-1"
                            *ngIf="model.ModelHealth == null"> NA
                        </div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center" (click)="closeWebSerciveURLWindow(index)">
                            <ng-container *ngIf="model.Status == 'Deployed'">
                                <app-my-visualization [model]="model" [parentComponent]="'pstTemplates'">
                                </app-my-visualization>
                            </ng-container>
                            <div *ngIf="model.Status == 'In  Progress'">NA</div>
                        </div>
                    </td>
                    <td>
                        <ng-container *ngIf="model.Status == 'Deployed'">
                            <div class="d-flex flex-nowrap justify-content-between myw-navbar-actions">
                                <div>
                                    <a class="webservice-position" role="button" data-toggle="dropdown" data-display="static" id="infoPopup"
                                        data-placement="bottom">
                                        <img src="assets/images/web-services.svg" /></a>
                                    <div class="dropdown-menu dropdown-xl" style="top: 62px;" aria-labelledby="infoPopup">
                                        <div class="d-flex align-items-center justify-content-between p-3">
                                            <h6 class="dropdown-title"></h6>
                                            <a class="webservice-closeicon"  title="Close"><span class="sr-only">Close</span></a>
                                        </div>
                                        <div class="webservice-width px-3 pb-3">
                                            <div> {{model.ModelURL}}
                                                <div style="padding-top: 3px;">
                                                    <label style="font-weight: bold;"> InputData  :-</label>
                                                    <div> {{model.InputSample}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <div *ngIf="model.Status == 'In
                            Progress'"> NA</div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center" *ngIf="model.Status == 'Deployed'">
                            <ng-container *ngIf="model.IsPrivate==true && model.IsModelTemplate==false">
                                Private
                            </ng-container>
                            <ng-container *ngIf="model.IsPrivate==false && model.IsModelTemplate==false">
                                Public
                            </ng-container>
                            <ng-container *ngIf="model.IsPrivate==false && model.IsModelTemplate==true">
                                Model Template
                            </ng-container>
                        </div>
                        <div *ngIf="model.Status == 'In Progress'"> NA</div>
                    </td>
                    <td> 
                        <a style="cursor: pointer;color: white; padding: 0.375rem 0.25rem;
                        line-height: 1.1;" class="btn btn-primary" (click)="moveToMyModel(model.CorrelationId)">Move to MyModel</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="d-flex align-items-center justify-content-end myw-pagination mb-0 mt-0">
    <nav>
        <ul class="pagination">
            <li style="margin-top: 1em;">
                <pagination-controls id="listing_pagination2" maxSize="8" directionLinks="true"
                    (pageChange)="page= $event">
                </pagination-controls>
            </li>
        </ul>
    </nav>
    <label class="sr-only">>></label>
    <div class="position-relative">
        <label class="sr-only">Page Selection</label>
        <select #limit (change)="itemsPerPage= limit.value">
            <option value="10">10/Page</option>
            <option value="20">20/Page</option>
            <option value="30">30/Page</option>
        </select>
    </div>
</div>



<ng-template #FMInProgressPopup>
    <div class="deploymodle-confirmpopup">
        <div class="modal-header">
            <h5 class="modal-title" id="ingrAI-enter-model-title">Release Success Predictor Model Status</h5>
            <button type="button" class="close" aria-label="Close" (click)="modalRef.hide()"></button>
        </div>
        <div class="modal-body">
            <div class="d-flex flex-column justify-content-center">
                <div>{{this.config.message}}</div>
            </div>
            <div class="d-flex justify-content-end myw-actions" style="margin-top: 1.56rem;">
                <button type="button" class="btn btn-primary" (click)="modalRef.hide()">OK</button>
            </div>
        </div>
    </div>
</ng-template>