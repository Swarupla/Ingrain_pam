<!-- Custom Model-->
<fieldset [disabled]="readOnly">
  <div class="custom-template"
    *ngIf="!displayUploadandDataSourceBlock || (displayUploadandDataSourceBlock==true && isExistingTemplate === false)">
    <div class="myw-section my-3 p-3">
      <div class="row ingrain-template-off">
        <div class="col-12">
          <div class="form-group">
            <label class="txtheading form-label" *ngIf="categoryType != ' release Management'">Selected Delivery
              Type: {{categoryType}}</label>
            <label class="txtheading form-label" *ngIf="categoryType == ' release Management'">Selected Delivery
              Type: System Integration</label>
            <!-- <input *ngIf="!displayUploadandDataSourceBlock" type="text" class="form-control" [value]="modelName"
              placeholder="Enter name of the conversation" disabled>
            <input *ngIf="displayUploadandDataSourceBlock" type="text" class="form-control" [value]="modelName"
              placeholder="Enter name of the conversation" disabled> -->
          </div>
          <div class="form-group">
            <label class="txtheading form-label">Problem Statement<span class="myw-required">&nbsp;</span></label>&nbsp;
            <app-info-tooltip class="ml-auto" [description]="'defineproblemhstatement'" [className]="'toggleLeft'"></app-info-tooltip>
            <ng-container *ngIf="!displayUploadandDataSourceBlock">
              <ng-container *ngIf="instaMLModel">
                <label class="text-area-disabled">{{problemStatement}}</label>
              </ng-container>
              <ng-container *ngIf="!instaMLModel">
                <textarea class="form-control" maxlength="500" [(ngModel)]=problemStatement [disabled]="instaMLModel"
                  (input)=" changeProblemStatement()" style="height: 2.5rem;">{{problemStatement}}</textarea>
              </ng-container>
              <small class="form-text text-muted">You have {{500 - problemStatement?.length}} of 500 characters
                remaining.</small>
            </ng-container>
            <ng-container *ngIf="displayUploadandDataSourceBlock">
              <ng-container *ngIf="instaMLModel">
                <label class="text-area-disabled">{{problemStatement}}</label>
              </ng-container>
              <ng-container *ngIf="!instaMLModel">
                <textarea class="form-control" maxlength="500" [(ngModel)]=problemStatement [disabled]="instaMLModel"
                  rows="3" disabled>{{problemStatement}}</textarea>
              </ng-container>
            </ng-container>

          </div>
          <div class="form-group" style="margin-bottom: 0rem;">
            <form  (ngSubmit)="onSubmit()">
              <label class="txtheading form-label">Time Series Forecasting </label>&nbsp;
              <app-info-tooltip class="ml-auto" [description]="'timeseries'" [className]="'toggleLeft'"></app-info-tooltip>
              <div [formGroup]="timeSeries">
                <label class="myw-switch ingr-switch">
                  <input *ngIf="!isFMModel" formControlName="timeSeriesSelect"  type="checkbox" [disabled]="instaMLModel"
                    [(ngModel)]="isTimeSeriesOn" (change)="timeSeriesToggle()" [checked]="isTimeSeriesOn">
                  <input *ngIf="isFMModel" type="checkbox" disabled>
                  <span class="label-first">OFF</span>
                  <span class="switch-toggle"></span>
                  <span class="label-last">ON</span>
                </label>
              </div>
              <section id="timeSeriesOptions" *ngIf="isTimeSeriesOn" class="pt-4">
                <div style=" display: flex; flex-wrap: wrap;">
                  <div class="col-9" style="top: -1em;">
                    <mat-label>Select the Frequency(ies) </mat-label>
                    <div class="form-group mb-2">
                      <mat-accordion>
                        <mat-expansion-panel>
                          <mat-expansion-panel-header>
                              <mat-label *ngIf="objectKeys(timeSeriesCheckboxValues).length == 0">Select the Frequency(ies) </mat-label>
                              <div class="myw-columns-frequency" *ngIf="objectKeys(timeSeriesCheckboxValues).length != 0">
                                <div *ngFor="let label of objectKeys(timeSeriesCheckboxValues); let i = index"
                                  style="display: inline-flex;">
                                  <label *ngIf="timeSeriesCheckboxValues[label].Steps"
                                    placement="right"
                                    [popover]="timeSeriesCheckboxValues[label].Name +':'+timeSeriesCheckboxValues[label].Steps"
                                    triggers="mouseenter:mouseleave">
                                    <div style=" max-width: 7em;overflow: hidden;text-overflow: ellipsis;">
                                      {{timeSeriesCheckboxValues[label].Name}} : {{timeSeriesCheckboxValues[label].Steps}}
                                    </div>
                                  </label>
                                </div>
                              </div>
                          </mat-expansion-panel-header>
                         <div style="max-height: 15em; overflow-y: auto;" >
                          <ng-container [ngTemplateOutlet]="ListOfFrequency"></ng-container>
                        </div>   
                      </mat-expansion-panel>
                       </mat-accordion>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="form-group mb-2">
                      <mat-form-field style="width: -webkit-fill-available;" [formGroup]="timeSeries">
                        <mat-label>Target Aggregation</mat-label>
                        <mat-select [(ngModel)]="targetAggVal" [compareWith]="compareObjects"
                          (ngModelChange)="onTargetAggValSelection()" [disabled]="targetAggDisable"
                          formControlName="targetAggregationControl">
                          <mat-option *ngFor="let aggregation of targetAggregation" [value]="aggregation">
                            {{aggregation}}
                          </mat-option>
                        </mat-select>
                        <mat-error *ngIf="hideTargetValForNone && timeSeries.get('targetAggregationControl').invalid">
                          Please Choose Target Aggregation</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </section>
            </form>
            <div class="d-flex align-self-end justify-content-end mb-3">
              <!-- Custom Cascading -->
              <a href="javascript:;" *ngIf="customCascadedId || isFMModel" class="ml-auto mr-3"
                (click)="showCascadeMapping(cascadeMappingPopup)">
                <img src="assets/images/cascade.svg" alt="Cascading Icon" />
              </a>
              <!-- Custom Cascading -->
              <!-- Custom Data -->
              <div *ngIf="customApiViewEnabled" class="pr-5">
                <button class="btn btn-primary" (click)="viewApiResult()">View API Details</button>
              </div>
              <div *ngIf="customQueryViewEnabled" class="pr-5">
                <button class="btn btn-primary" (click)="viewQueryResult()">View Query Details</button>
              </div>
              <!-- Custom Data -->
              <ng-container *ngIf="readOnly != null" >
              <button *ngIf="!readOnly && !IfModelTemplateDataSource" class="btn btn-primary" (click)="openConfirmationDialog()">Change Data
                Source</button>
              <button *ngIf="readOnly && !IfModelTemplateDataSource" class="btn btn-primary" (click)="accessDenied()">Change Data Source</button>
            </ng-container>
            <ng-container *ngIf="IfModelTemplateDataSource"> 
              <button class="btn btn-primary" disabled>Change Data Source</button>
            </ng-container>
            <ng-container *ngIf="IfModelTemplateDataSource == false && readOnly == null"> 
              <button class="btn btn-primary" (click)="openConfirmationDialog()">Change Data Source</button>
            </ng-container>
            </div>
            <div class="d-flex align-self-end justify-content-end">
              <span class="dataSource-txt px-3" *ngIf="customApiViewEnabled">Click above to view the API details</span>
              <span class="dataSource-txt px-3" *ngIf="customQueryViewEnabled">Click above to view the Query details</span>
              <span class="dataSource-txt">Click above to change the existing data source</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="myw-section my-3 p-3">
      <div class="row">
        <div class="col-12 col-lg-6 mb-lg-0 mb-3">
          <div id='targetContainer' class="ingrain-section d-flex flex-column h-100">
            <div class="d-flex">
              <div class="myw-500">Attribute To Predict<span class="myw-required">&nbsp;</span></div>
              <app-info-tooltip class="ml-auto" [description]="'attributetopredict'"></app-info-tooltip>
            </div>
            <div class="ingrain-sec-bdy">
              <div *ngIf="targetColButtonDisabled">
                <div *ngIf='targetColumn' class="ingrain-item">
                  <span class="ingrAI-target-item-name">{{targetColumn}}</span>
                </div>
              </div>
              <div *ngIf="!targetColButtonDisabled" class="form-group mb-0">
                <mat-form-field class="w-50" *ngIf="!isCustomAttrClicked">
                  <mat-label>Select</mat-label>
                  <mat-select #targetValue [ngModel]="targetColumn"
                    (ngModelChange)="onSelectChange(targetValue.value,'columnsContainer','targetContainer')">
                    <mat-option *ngIf="!isTimeSeriesOn" [value]="'CustomTarget'">Add Custom Attribute
                      <img src="assets/images/pencil.svg" alt="Add Custom Attribute"
                        style="margin-top: 15px;float: right;" />
                    </mat-option>
                    <mat-option *ngIf="targetColumn" class="target-column" [value]="targetColumn">{{targetColumn}}
                    </mat-option>
                    <ng-container *ngIf="inputColumns">
                      <ng-container *ngIf="inputColumns.size > 0">
                        <mat-option class="input-column" class="input-column" *ngFor="let column of inputColumns"
                          [value]="column">{{column}}
                        </mat-option>
                      </ng-container>
                    </ng-container>
                    <ng-container *ngIf="columnData">
                      <ng-container *ngIf="columnData.size > 0">
                        <mat-option class="columm-data" class="column-data" *ngFor="let column of columnData"
                          [value]="column">{{column}}
                        </mat-option>
                      </ng-container>
                    </ng-container>
                    <ng-container *ngIf="customTargetColumn && showCustomTarget == true">
                      <ng-container
                        *ngIf="customTargetColumn.size > 0 && customTargetColumn.has(targetColumn) !== true">
                        <mat-option class="custom-target" *ngFor="let column of customTargetColumn" [value]="column">
                          {{column}}<span href="javascript:;" title="Remove" class="ml-3"
                            (click)="removeCustomColumn(column)" aria-label="Remove">x</span></mat-option>
                      </ng-container>
                    </ng-container>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="d-flex form-group mb-0" *ngIf="isCustomAttrClicked">
                <input [(ngModel)]="custTargetName" type="text" maxlength="70" class="form-control w-50">
                <small class="form-text text-muted">You have {{70 - custTargetName?.length}} of 70 characters
                  remaining.</small>
                <a href="javascript:;" class="mt-3 ml-3" (click)="isTargetName(custTargetName)">Add</a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div id='uniqueIdentifierContainer' class="ingrain-section d-flex flex-column h-100">
            <div class="d-flex">
              <div class="myw-500">Unique Identifier<span *ngIf="!isTimeSeriesOn" class="myw-required">&nbsp;</span>
              </div>
              <app-info-tooltip class="ml-auto" [className]="'toggleRight'" [description]="'uniqueidentifier'">
              </app-info-tooltip>
            </div>

            <div class="ingrain-sec-bdy">
              <div *ngIf="uniqueIdentifierDisabled">
                <div *ngIf="uniqueIdentifierVal" class="ingrain-item">
                  <span class="ingrAI-target-item-name">{{uniqueIdentifierVal}}</span>
                </div>
              </div>
              <div *ngIf="!uniqueIdentifierDisabled" class="form-group mb-0">
                <mat-form-field class="w-50">
                  <mat-label>Select</mat-label>
                  <mat-select #uniqueValue [(ngModel)]="uniqueIdentifierVal"
                    (ngModelChange)="onSelectChange(uniqueValue.value,'list','uniqueIdentifierContainer')">
                    <mat-option *ngIf="uniqueIdentifierVal" [value]="uniqueIdentifierVal">{{uniqueIdentifierVal}}
                    </mat-option>
                    <ng-container *ngIf="inputColumns">
                      <ng-container *ngIf="inputColumns.size > 0">
                        <ng-container *ngIf="isTimeSeriesOn">
                          <mat-option>None</mat-option>
                        </ng-container>
                        <mat-option *ngFor="let column of inputColumns" [value]="column">{{column}}</mat-option>
                      </ng-container>
                    </ng-container>
                    <ng-container *ngIf="columnData">
                      <ng-container *ngIf="columnData.size > 0">
                        <ng-container *ngIf="isTimeSeriesOn">
                          <mat-option>None</mat-option>
                        </ng-container>
                        <mat-option *ngFor="let column of columnData" [value]="column">{{column}}</mat-option>
                      </ng-container>
                    </ng-container>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="myw-section my-3 p-3">
      <div class="ingrain-section d-flex flex-column">
        <div class="d-flex">
          <div class="myw-500">
            <span *ngIf="!isTimeSeriesOn" class="myw-required">Choose Potential Influencing Attributes</span>
            <span *ngIf="isTimeSeriesOn" class="myw-required">Choose Date Attribute</span>
            <span *ngIf="!isTimeSeriesOn && inputColumns && columnData"
              class="myw-chips ingrain-chips">{{inputColumns.size}}/{{columnData.size+inputColumns.size}}</span>
            <span *ngIf="isTimeSeriesOn && inputColumns && columnData && timeSeriesColumns != ''"
              class="myw-chips ingrain-chips">1/{{columnData.size+inputColumns.size+1}}</span>
            <span *ngIf="isTimeSeriesOn && inputColumns && columnData && timeSeriesColumns == ''"
              class="myw-chips ingrain-chips">0/{{columnData.size+inputColumns.size+1}}</span>
          </div>
          <app-info-tooltip class="ml-auto" [className]="'toggleRight'"
            [description]="'potentialinfluencingattributes'"></app-info-tooltip>
        </div>
        <div class="ingrain-sec-bdy">
          <div class="d-flex flex-wrap myw-columns">
            <label *ngIf="toggleSelect"><input type="checkbox" [disabled]="!showSelectAll" name="select-columns"
                (click)='selectAll()'><span>Select All</span></label>
            <label *ngIf="!toggleSelect"><input type="checkbox" [disabled]="!showSelectAll" name="select-columns"
                (click)='deselectAll()'><span>Deselect All</span></label>
            <!-- <ng-container *ngIf="showCustomTarget && !isTimeSeriesOn && customTargetColumn.size > 0">
              <label class="custom-target" *ngFor="let column of customTargetColumn"><input type="checkbox"
                  name="select-columns custom-target-column"><span>{{column}}</span></label>
            </ng-container> -->
            <ng-container *ngIf="isTimeSeriesOn">
              <ng-container *ngIf='timeSeriesColumns'>
                <label class="timeseries-column"><input type="radio" name="select-columns"
                    (click)="onSelectChange(column,'columnsContainer','timeSeriesColumnsContainer',$event)"
                    checked><span
                    style="background-color: #D9EEFF;border-color: #D9EEFF;font-weight: 500;">{{timeSeriesColumns}}</span></label>
              </ng-container>
              <ng-container *ngFor="let column of columnData">
                <label *ngIf="column != timeSeriesColumns" class="column-data"><input type="radio" name="select-columns"
                    (click)="onSelectChange(column,'columnsContainer','timeSeriesColumnsContainer',$event)"><span>{{column}}</span></label>
              </ng-container>
            </ng-container>
            <ng-container *ngIf="!isTimeSeriesOn">
              <label class="input-column" *ngFor="let column of inputColumns"><input type="checkbox"
                  name="select-columns input-column"
                  (click)="onSelectChange(column,'columnsContainer','columnsContainer', $event)" checked><span
                  [ngClass]="(column == proba1Value || column == previousModelTarget) ? 'cursor-default' : ''">{{column}}</span></label>
              <ng-container *ngIf="column != timeSeriesColumns">
                <label class="column-data" *ngFor="let column of columnData"><input type="checkbox"
                    name="select-columns all-column"
                    (click)="onSelectChange(column,'columnsContainer','columnsContainer',$event)"><span>{{column}}</span></label>
              </ng-container>
              <!-- Custom Cascading -->
              <!--<ng-container *ngIf="mappingData!= null && mappingData != undefined">
                 <label class="cascade-data"><input type="checkbox" disabled
                  name="select-columns cascade-column" checked><span>{{mappingData[0][0].ModelName}}_{{mappingData[0][0].targetColumn}}</span></label>
                <label class="cascade-data" *ngIf="mappingData[0][0].ProblemType == 'Classification'"><input type="checkbox" disabled
                  name="select-columns cascade-column" checked><span>{{mappingData[0][0].ModelName}}_Prob1</span></label> 
              </ng-container>-->
              <label class="cascade-model-list" *ngIf="!isTimeSeriesOn"><button
                  [disabled]="isIncludedinCustomCascade == true || targetColumn==null || targetColumn=='' || targetColumn==undefined || uniqueIdentifierVal==null || uniqueIdentifierVal=='' || uniqueIdentifierVal==undefined || customCascadedId || isFMModel==true"
                  type="button" class="btn btn-primary" name="select-columns"
                  (click)="getModelsForCascading(customCascadingModels)">List of available models</button></label>
              <!-- Custom Cascading -->
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</fieldset>
<!-- Custom Model-->

<!-- Prebuilt Model-->
<fieldset [disabled]="readOnly">
  <div class="prebuilt-template" *ngIf="displayUploadandDataSourceBlock && isExistingTemplate === true">
    <div class="myw-section my-3 p-3">
      <div class="row ingrain-template-off">
        <div class="col-12">
          <div class="form-group">
            <label class="txtheading form-label" *ngIf="categoryType != ' release Management'">Selected Delivery
              Type: {{categoryType}}</label>
            <label class="txtheading form-label" *ngIf="categoryType == ' release Management'">Selected Delivery
              Type: System Integration</label>
            <!-- <input type="text" class="form-control" [value]="modelName" placeholder="Enter name of the conversation"
              disabled> -->
          </div>
          <div class="form-group">
            <label class="txtheading form-label">Problem Statement<span class="myw-required">&nbsp;</span></label>&nbsp;
            <!-- <span class="ml-auto"> -->
            <app-info-tooltip [className]="'toggleLeft'" class="ml-auto" [description]="'defineproblemhstatement'"></app-info-tooltip>
            <!-- </span> -->
            <!-- <a href="javascript:;" class="ml-auto"><img src="assets/images/info.svg" alt="" /></a> -->
            <!-- <textarea class="form-control" [(ngModel)]=problemStatement style="height: 2.5rem;"
              disabled>{{problemStatement}}</textarea> -->
            <label class="text-area-disabled">{{problemStatement}}</label>
          </div>
          <div class="form-group" style="margin-bottom: 0rem;">
            <form  (ngSubmit)="onSubmit()">
              <label class="txtheading form-label">Time Series Forecasting </label>&nbsp;
              <app-info-tooltip [className]="'toggleLeft'" class="ml-auto" [description]="'timeseries'"></app-info-tooltip>
              <div [formGroup]="timeSeries">
                <label class="myw-switch ingr-switch">
                  <input formControlName="timeSeriesSelect" disabled type="checkbox" [(ngModel)]="isTimeSeriesOn"
                    (change)="timeSeriesToggle()" [checked]="isTimeSeriesOn">
                  <span class="label-first">OFF</span>
                  <span class="switch-toggle"></span>
                  <span class="label-last">ON</span>
                </label>
              </div>

              <section id="timeSeriesOptions" *ngIf="isTimeSeriesOn" class="pt-4">
                <div style=" display: flex; flex-wrap: wrap;">
                  <div class="col-9" style="top: -1em;">
                    <mat-label>Select the Frequency(ies) </mat-label>
                    <div class="form-group mb-2">
                      <mat-accordion >
                        <mat-expansion-panel disabled> <!-- Disabled As per Scenario-->
                          <mat-expansion-panel-header>
                              <mat-label *ngIf="objectKeys(timeSeriesCheckboxValues).length == 0">Select the Frequency(ies) </mat-label>
                              <div class="myw-columns-frequency" *ngIf="objectKeys(timeSeriesCheckboxValues).length != 0">
                                <div *ngFor="let label of objectKeys(timeSeriesCheckboxValues); let i = index"
                                  style="display: inline-flex;">
                                  <label *ngIf="timeSeriesCheckboxValues[label].Steps"
                                    placement="right"
                                    [popover]="timeSeriesCheckboxValues[label].Name +':'+timeSeriesCheckboxValues[label].Steps"
                                    triggers="mouseenter:mouseleave">
                                    <div style=" max-width: 7em;overflow: hidden;text-overflow: ellipsis;">
                                      {{timeSeriesCheckboxValues[label].Name}} : {{timeSeriesCheckboxValues[label].Steps}}
                                    </div>
                                  </label>
                                </div>
                              </div>
                          </mat-expansion-panel-header>
                         <div style="max-height: 15em; overflow-y: auto;" >
                          <ng-container [ngTemplateOutlet]="ListOfFrequency"></ng-container>
                        </div>   
                      </mat-expansion-panel>
                       </mat-accordion>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="form-group mb-2"> 
                      <mat-form-field style="width: -webkit-fill-available;" [formGroup]="timeSeries">
                        <mat-label>Target Aggregation</mat-label>
                        <mat-select [ngModel]="targetAggVal"
                          (ngModelChange)="onTargetAggValSelection()" [disabled]="targetAggDisable"
                          formControlName="targetAggregationControl">
                          <mat-option *ngFor="let aggregation of targetAggregation" [value]="aggregation">
                            {{aggregation}}
                          </mat-option>
                        </mat-select>
                        <mat-error *ngIf="hideTargetValForNone && timeSeries.get('targetAggregationControl').invalid">
                          Please Choose Target Aggregation</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </section>

            </form>
            <div class="d-flex align-self-end justify-content-end mb-3">
              <button *ngIf="!readOnly" class="btn btn-primary" (click)="openModalForApi()">Connect to Data
                Source</button>
              <button *ngIf="readOnly" class="btn btn-primary" (click)="accessDenied()">Connect to Data Source</button>
            </div>
            <div class="d-flex align-self-end justify-content-end">
              <span class="dataSource-txt">Click above to upload data and update the attributes</span>
            </div>
          </div>
        </div>

      </div>
    </div>
    <div class="myw-section my-3 p-3">
      <div class="row">
        <div class="col-12 col-lg-6 mb-lg-0 mb-3">
          <div id='targetContainer' class="ingrain-section d-flex flex-column h-100">
            <div class="d-flex">
              <div class="myw-500">Attribute To Predict</div>
              <app-info-tooltip class="ml-auto" [description]="'attributetopredict'"></app-info-tooltip>
            </div>
            <div class="ingrain-sec-bdy">
              <div>
                <div *ngIf='targetColumn' class="ingrain-item">
                  <span class="ingrAI-target-item-name">{{targetColumn}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div id='uniqueIdentifierContainer' class="ingrain-section d-flex flex-column h-100">
            <div class="d-flex">
              <div class="myw-500">Unique Identifier</div>
              <app-info-tooltip class="ml-auto" [className]="'toggleRight'" [description]="'uniqueidentifier'">
              </app-info-tooltip>
            </div>
            <div class="ingrain-sec-bdy">
              <div *ngIf="uniqueIdentifierVal" class="ingrain-item">
                <span class="ingrAI-target-item-name">{{uniqueIdentifierVal}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="myw-section my-3 p-3">
      <div class="ingrain-section d-flex flex-column">
        <div class="d-flex">
          <div class="myw-500">
            <span *ngIf="!isTimeSeriesOn" class="myw-required">Choose Potential Influencing Attributes</span>
            <span *ngIf="isTimeSeriesOn" class="myw-required">Choose Date Attribute</span>
            <span *ngIf="!isTimeSeriesOn && inputColumns && columnData"
              class="myw-chips ingrain-chips">{{inputColumns.size}}/{{columnData.size+inputColumns.size}}</span>
            <span *ngIf="isTimeSeriesOn && inputColumns && columnData && timeSeriesColumns != ''"
              class="myw-chips ingrain-chips">1/{{columnData.size+inputColumns.size+1}}</span>
            <span *ngIf="isTimeSeriesOn && inputColumns && columnData && timeSeriesColumns == ''"
              class="myw-chips ingrain-chips">0/{{columnData.size+inputColumns.size+1}}</span>
          </div>
          <app-info-tooltip class="ml-auto" [className]="'toggleRight'"
            [description]="'potentialinfluencingattributes'"></app-info-tooltip>
        </div>
        <div class="ingrain-sec-bdy">
          <div class="d-flex flex-wrap myw-columns">
            <!-- <label><input type="checkbox" name="select-columns" [disabled]="prebuiltInputAction"><span>Select All</span></label>
            <label><input type="checkbox" [disabled]="!showSelectAll" name="select-columns" (click)='deselectAll()'><span>Deselect All</span></label> -->

            <label *ngIf="toggleSelect"><input type="checkbox" [disabled]="prebuiltInputAction" name="select-columns"
                (click)='selectAll()'><span>Select All</span></label>
            <label *ngIf="!toggleSelect"><input type="checkbox" [disabled]="prebuiltInputAction" name="select-columns"
                (click)='deselectAll()'><span>Deselect All</span></label>

            <ng-container *ngIf="showCustomTarget && !isTimeSeriesOn && customTargetColumn.size > 0">
              <label *ngFor="let column of customTargetColumn"><input type="checkbox"
                  name="select-columns custom-target-column" disabled><span>{{column}}</span></label>
            </ng-container>
            <ng-container *ngIf="isTimeSeriesOn">
              <ng-container *ngIf='timeSeriesColumns'>
                <label><input type="checkbox" disabled checked name="select-columns all-column"
                    (click)="onSelectChange(column,'columnsContainer','timeSeriesColumnsContainer',$event)"><span
                    style="background-color: #D9EEFF;border-color: #D9EEFF; font-weight: 500;">{{timeSeriesColumns}}</span></label>
              </ng-container>
            </ng-container>
            <ng-container *ngIf="!isTimeSeriesOn">
              <label *ngFor="let column of inputColumns"><input type="checkbox" name="select-columns input-column"
                  checked [disabled]="prebuiltInputAction"><span
                  style="background-color: #D9EEFF;border-color: #D9EEFF;">{{column}}</span></label>
            </ng-container>
            <ng-container *ngFor="let column of columnData">
              <label *ngIf="column != timeSeriesColumns"><input type="checkbox" name="select-columns all-column"
                  [disabled]="prebuiltInputAction"><span>{{column}}</span></label>
            </ng-container>
            <!-- <ng-container *ngIf="!isTimeSeriesOn">
              <label *ngFor="let column of inputColumns"><input type="checkbox" name="select-columns input-column"
                  checked disabled><span
                  style="background-color: #D9EEFF;border-color: #D9EEFF;">{{column}}</span></label>
            </ng-container> -->
          </div>
        </div>
      </div>
    </div>
  </div>
</fieldset>
<!-- Prebuilt Model-->

<ng-template #customCascadingModels>
  <div class="deploymodle-confirmpopup">
    <div class="modal-header" style="border-bottom: none;">
      <div class="col-8" style="color:white;"><b>Select a model</b></div>
      <button type="button" class="close pull-right" style="cursor: pointer;" aria-label="Close"
        (click)="modalRef.hide()">
        <svg class="ingrAI-icon-svg ingrAI-icon-svg-md">
          <use xlink:href="#ingrAI-icon-close"></use>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="ingrAIn-roles-items"
        [ngStyle]="{'background-color':(model.IsIncludedinCustomCascade == true || model.CascadeModelCount>4) ? 'lightgrey' : '' }"
        *ngFor="let model of customModelNames; let indx = index">
        <div class="model-name">
          <a href="javascript:;"><img src="assets/images/drag.svg" alt="Drag"></a>
          <a href="javascript:;" style="color: black !important;"
            *ngIf="model.IsIncludedinCustomCascade == false && model.CascadeModelCount<5"
            (click)="uniqueIdentifierMapping(customCascadingUniqueIdMapping, model.CorrelationId, model.CustomCascadeId)"
            data-id="model.CorrelationId" class="text-reset text-decoration-none">{{model.ModelName}}</a>
          <a href="javascript:;" style="color: black !important;"
            *ngIf="model.IsIncludedinCustomCascade == true || model.CascadeModelCount>4" data-id="model.CorrelationId"
            class="text-reset text-decoration-none">{{model.ModelName}}</a>
          <span class="tooltiptext">
            <div>Model Type : {{model.ProblemType}}</div>
            <div>Algorithm name: {{model.ModelType}}</div>
            <div>Accuracy : {{model.Accuracy}}</div>
            <div>Target Column : {{model.TargetColumn}}</div>
          </span>
        </div>
      </div>
      <div class="modal-footer" style="border-top: none;">
        <button type="button" class="btn btn-primary" style=" font-size: 1rem;"
          (click)="modalRef.hide()">Cancel</button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #customCascadingUniqueIdMapping>
  <div class="deploymodle-confirmpopup">
    <div class="modal-header d-flex" style="border-bottom: none;">
      <div class="col-8" style="color:white;"><b>Unique Identifier Mapping</b></div>
      <button type="button" class="close pull-right col-1" style="cursor: pointer;" aria-label="Close"
        (click)="modalRef.hide()">
        <svg class="ingrAI-icon-svg ingrAI-icon-svg-md">
          <use xlink:href="#ingrAI-icon-close"></use>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="d-flex align-items-center">
        <div class="form-group col-6">
          <label style="color: black !important;">Select Unique Identifier of Current Model</label>
          <select #targetUniqueId class="form-control select-mapping">
            <option value="undefined">None</option>
            <ng-container *ngFor="let column of mappingData[1]">
              <option [value]="column.column"
                *ngIf="column.column != column.targetColumn && column.dataType != 'datetime64[ns]'">{{column.column}}
              </option>
            </ng-container>
          </select>
        </div>
        <div class="form-group col-6">
          <label style="color: black !important;">Select Unique Identifier of Chosen Model</label>
          <select #sourceUniqueId class="form-control select-mapping">
            <option value="undefined">None</option>
            <ng-container *ngFor="let column of mappingData[0]">
              <option [value]="column.column"
                *ngIf="column.column != column.targetColumn && column.dataType != 'datetime64[ns]'">{{column.column}}
              </option>
            </ng-container>
          </select>
        </div>
      </div>
      <div class="modal-footer" style="border-top: none;">
        <button type="button" class="btn btn-primary" style=" font-size: 1rem;"
          (click)="modalRef.hide()">Cancel</button>
        <button type="button" class="btn btn-primary" style=" font-size: 1rem;"
          (click)="confirmCustomCascade(sourceUniqueId.value,targetUniqueId.value,cascadeModelNamePopup,newConfig.cascadedId,newConfig.cascadeModelName,newConfig.AppId)">OK</button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #cascadeModelNamePopup>
  <div class="deploymodle-confirmpopup">
    <div class="modal-header">
      <h5 class="modal-title" id="ingrAI-enter-model-title">Enter cascade model name</h5>
      <button type="button" class="close" aria-label="Close" (click)="modalRef.hide()"></button>
    </div>
    <div class="modal-body">
      <div class="d-flex flex-column justify-content-center">
        <form #form=ngForm>
          <div class="ingrAI-search ml-auto ingrAI-search-container">
            <input placeholder="Enter cascade model name" type="text" class="form-control" maxlength="70" name='modalName' required
              #cascadeModelName>
              <small class="form-text text-muted">You have {{70 - cascadeModelName.value?.length}} of 70 characters
                remaining.</small>
          </div>
        </form>
      </div>
      <div class="d-flex justify-content-end myw-actions" style="margin-top: 1.56rem;">
        <button type="button" class="btn btn-primary" [disabled]="disableCascadeSave"
          (click)='onEnterModelName(newConfig.source, newConfig.target, cascadeModelName.value)'>Save</button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #cascadeMappingPopup>
  <div class="cascade-popup">
    <div class="modal-header">
      <h5 *ngIf="isFMModel != true" class="modal-title" id="ingrAI-enter-model-title">Cascade Mapping</h5>
      <h5 *ngIf="isFMModel == true" class="modal-title" id="ingrAI-enter-model-title">Release Success Predictor - Model
        Flow</h5>
      <button type="button" class="close" aria-label="Close" (click)="modalRef.hide()"></button>
    </div>
    <div class="modal-body">
      <div class="d-flex flex-column justify-content-center">
        <div class="ingrAIn-mappping-chart d-flex  myw-scrollbar"
          *ngIf="allAttributes.length > 0 && isFMModel == false">
          <!-- <app-sankey-chart [sourceId]="sourceId" [targetId]="targetId"></app-sankey-chart> -->
          <app-cascade-models-chart style="margin:auto;" [sourceId]="sourceId" [targetId]="targetId"
            [targetIdArray]="targetIdArray" [uniqueIdArray]="uniqueIdArray" [models]="allAttributes"
            [modelNames]="modelNames" [masterData]="dataForCascadeGraph" [svgWidth]="svgWidth" [svgHeight]="svgHeight"
            [customCascade]="true"></app-cascade-models-chart>
        </div>
        <div class="ingrAIn-mappping-chart d-flex  myw-scrollbar" *ngIf="isFMModel == true">
          <img src="assets/images/FM_Scenario.png" class="img-fluid ml-auto mr-auto" alt="" />
        </div>
      </div>
      <div class="d-flex justify-content-end myw-actions" style="margin-top: 1.56rem;">
        <button type="button" class="btn btn-primary" (click)="modalRef.hide()">Close</button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #FMScenarioSuccessPopup>
  <div class="deploymodle-confirmpopup">
    <div class="modal-header">
      <h5 class="modal-title" id="ingrAI-enter-model-title">Release Success Predictor Model Status</h5>
      <button type="button" class="close" aria-label="Close" (click)="closeFMPopup()"></button>
    </div>
    <div class="modal-body">
      <div class="d-flex flex-column justify-content-center">
        <div class="myw-scrollbar" *ngIf="completedModels.length > 0">
          <span>Training is completed for &nbsp;</span>
          <ng-container *ngFor="let model of completedModels; let j = index">
            <ng-container *ngIf="j !== 0">
              <span>&nbsp; and &nbsp;</span>
            </ng-container>
            <span><b>{{model.ModelName}}</b></span>
          </ng-container>
          <span>.</span>
        </div>
      </div>
      <div class="d-flex justify-content-end myw-actions" style="margin-top: 1.56rem;">
        <button type="button" class="btn btn-primary" (click)="closeFMPopup()">Close</button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #FMScenarioTrainingStatus>
  <div class="deploymodle-confirmpopup">
    <div class="modal-header">
      <h5 class="modal-title" id="ingrAI-enter-model-title">Release Success Predictor Model Status</h5>
      <button type="button" class="close" aria-label="Close" (click)="redirectToMyModels()"></button>
    </div>
    <div class="modal-body">
      <div class="d-flex flex-column justify-content-center">
        <div>Model training of <b>{{modelName}}</b> is under progress. Please check the My Models screen for the status
          update.</div>
      </div>
      <div class="d-flex justify-content-end myw-actions" style="margin-top: 1.56rem;">
        <button type="button" class="btn btn-primary" (click)="redirectToMyModels()">OK</button>
      </div>
    </div>
  </div>
</ng-template>


<ng-template #ListOfFrequency>
  <div style="margin-left: 2em">
    <mat-label> Hourly </mat-label>
  </div>
  <mat-form-field style="margin-left: 2em;" [formGroup]="timeSeries">
    <mat-label>Hourly</mat-label>
    <mat-select #hourly id="hourly" formControlName="hourlyControl"
    [(ngModel)]="timeSeriesCheckboxValues[0].Steps"
      [disabled]="instaMLModel">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let hour of hoursList" [value]="hour">{{ hour }}</mat-option>
    </mat-select>
  </mat-form-field>


  <div style="margin-left: 2em">
    <mat-label> Daily </mat-label>
  </div>
  <mat-form-field style="margin-left: 2em;" [formGroup]="timeSeries">
    <mat-label>Daily</mat-label>
    <mat-select #daily id="daily" formControlName="dailyControl"
    [(ngModel)]="timeSeriesCheckboxValues[1].Steps"
      [disabled]="instaMLModel">
      <mat-option>None </mat-option>
      <mat-option *ngFor="let daily of dailyList" [value]="daily">{{daily}}</mat-option>
    </mat-select>
  </mat-form-field>

  <div style="margin-left: 2em">
    <mat-label> Weekly </mat-label>
  </div>
  <mat-form-field style="margin-left: 2em;" [formGroup]="timeSeries">
    <mat-label>Weekly</mat-label>
    <mat-select #weekly id="weekly" formControlName="weeklyControl"
    [(ngModel)]="timeSeriesCheckboxValues[2].Steps"
      [disabled]="instaMLModel">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let weekly of weeklyList" [value]="weekly">{{weekly}}</mat-option>
    </mat-select>
  </mat-form-field>

 
  <div style="margin-left: 2em">
    <mat-label> Monthly </mat-label>
  </div>
  <mat-form-field style="margin-left: 2em;" [formGroup]="timeSeries">
    <mat-label>Monthly</mat-label>
    <mat-select #monthly id="monthly" formControlName="monthlyControl"
      [(ngModel)]="timeSeriesCheckboxValues[3].Steps"
      [disabled]="instaMLModel">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let monthly of monthlyList" [value]="monthly">{{monthly}}</mat-option>
    </mat-select>
  </mat-form-field>

  <div style="margin-left: 2em">
    <mat-label> Fortnightly
    </mat-label>
  </div>
  <mat-form-field style="margin-left: 2em;" [formGroup]="timeSeries">
    <mat-label>Fortnightly</mat-label>
    <mat-select formControlName="fortNightlyControl"
      [(ngModel)]="timeSeriesCheckboxValues[4].Steps"
      [disabled]="instaMLModel">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let fortNightly of fortnightlyList" [value]="fortNightly">{{fortNightly}}</mat-option>
    </mat-select>
  </mat-form-field>

  <div style="margin-left: 2em">
    <mat-label> Quarterly </mat-label>
  </div>
  <mat-form-field style="margin-left: 2em;" [formGroup]="timeSeries">
    <mat-label>Quarterly</mat-label>
    <mat-select formControlName="quarterlyControl"
      [(ngModel)]="timeSeriesCheckboxValues[5].Steps"
      [disabled]="instaMLModel">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let quarterly of quarterlyList" [value]="quarterly">{{quarterly}}</mat-option>
    </mat-select>
  </mat-form-field>

  <div style="margin-left: 2em">
    <mat-label> Half-Yearly</mat-label>
  </div>
  <mat-form-field style="margin-left: 2em;" [formGroup]="timeSeries">
    <mat-label>Half-Yearly</mat-label>
    <mat-select formControlName="halfYearlyControl"
      [(ngModel)]="timeSeriesCheckboxValues[6].Steps"
      [disabled]="instaMLModel">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let halfYearly of halfYearlyList" [value]="halfYearly">{{halfYearly}}</mat-option>
    </mat-select>
  </mat-form-field>

  <div style="margin-left: 2em">
    <mat-label> Yearly </mat-label>
  </div>
  <mat-form-field style="margin-left: 2em;" [formGroup]="timeSeries">
    <mat-label>Yearly</mat-label>
    <mat-select formControlName="yearlyControl"
      [(ngModel)]="timeSeriesCheckboxValues[7].Steps"
      [disabled]="instaMLModel">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let yearly of yearlyList" [value]="yearly">{{yearly}}</mat-option>
    </mat-select>
  </mat-form-field> 

  <div style="margin-left: 2em">
    <mat-label #customDays> Custom Days
    </mat-label>
  </div>
  <div style="display:inline-flex; margin-left: 2em;">
    <mat-form-field class="d-flex" [floatLabel]="'always'" [formGroup]="timeSeries">
      <mat-label>Custom Days</mat-label>
      <input matInput formControlName="customDaysValueControl"
        [(ngModel)]="timeSeriesCheckboxValues[8].value" [disabled]="instaMLModel">

    </mat-form-field>
    <mat-form-field class="d-flex ml-3" [floatLabel]="'always'" [formGroup]="timeSeries">
      <mat-label>Frequency</mat-label>
      <mat-select style="padding-left: 5px;" formControlName="customDaysControl"
        [(ngModel)]="timeSeriesCheckboxValues[8].Steps"
        [disabled]="instaMLModel">
        <mat-option>None</mat-option>
        <mat-option *ngFor="let customDays of customDaysList" [value]="customDays">
          {{customDays}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="timeSeries.controls.customDaysValueControl.status === 'INVALID'">
        Kindly enter value between 1 to 30.
      </mat-error>

    </mat-form-field>
  </div>
</ng-template>
